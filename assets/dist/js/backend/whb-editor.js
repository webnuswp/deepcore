"use strict";function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.onload=function(){document.body.style.display="block"},function(z){z(document).ready(function(){z(window).on("load",function(){var c,h,b,w,f,u,e,n,a=z("body"),p=z("#wn-header-builder"),t=p.find(".whb-elements-place"),l=p.find(".whb-desktop-panel").find('.whb-columns[data-columns="row1"]').find(".whb-elements-place"),m=whb_localize.components&&!Array.isArray(whb_localize.components)?whb_localize.components:{},v=whb_localize.editor_components||{},g=whb_localize.frontend_components||{},y={"desktop-view":{},"tablets-view":{},"mobiles-view":{}},i=!1;function _(){console.log("%c Components:","font-size: 18px; background: #EC9787; color: #fff;",m),console.log("%c Editor Components:","font-size: 18px; background: #6F9FD8; color: #fff;",v),console.log("%c Frontend Components:","font-size: 18px; background: #ECDB54; color: #fff;",g)}function s(e){try{JSON.parse(e)}catch(e){return}return 1}function o(){return!!a.hasClass("whb-frontend-builder-wrap")}for(e in _(),m)m.hasOwnProperty(e)&&function(){var t=m[e];-1!=e.search("logo")&&(n=e.slice("5"),p.find('.whb-elements-item[data-element="logo"][data-unique-id="'+n+'"]').each(function(){var e=z(this);wp.media.attachment(t.logo).fetch().done(function(){e.children("a").hide().after('<img class="whb-img-placeholder-el" src="'+this.attributes.url+'" alt="">')})}))}();var d,r,C=z(document).height();function k(i,l,e){var s=2<arguments.length&&void 0!==e&&e,o=i.attr("data-element"),d=i.attr("data-unique-id"),r=o+"_"+d;m.hasOwnProperty(r)||(m[r]={}),0<!p.children(".whb-spinner-wrap").length&&p.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),z.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_get_component_fields",el_name:o,nonce:whb_localize.nonce},success:function(e){0<p.children(".whb-spinner-wrap").length&&p.children(".whb-spinner-wrap").remove(),z(".wn-header-builder-wrap").append(e),(h=p.find('.whb-modal-wrap[data-element-target="'+o+'"]')).find(".whb-tabs-list").find("li").removeClass("w-active"),h.find(".whb-tab-panel").hide(),h.find(".whb-tabs-list").find("li:first").addClass("w-active"),h.find(".whb-modal-contents").children(".whb-tab-panel:first").show();var t,e=h.find(".whb-modal-contents").children(".whb-tab-panel");if("desktop-view"==l?e.find('.whb-tab-panel[data-id="#all"]').show():"tablets-view"==l?e.find('.whb-tab-panel[data-id="#tablets"]').show():"mobiles-view"==l?e.find('.whb-tab-panel[data-id="#mobiles"]').show():"sticky-view"==l&&e.find('.whb-tab-panel[data-id="#all"]').show(),e.find(".whb-tab-panel").find(".whb-tab-panel:first").show(),h.show(),h.find(".whb-field").each(function(){var e=z(this).find(".whb-field-input"),t=e.data("field-name"),n=void 0!==(n=e.data("field-std"))?n:"";e.hasClass("whb-field-textarea")?e.val(m[r][t]).val(m[r][t]):void 0!==m[r][t]?e.val(m[r][t]):(e.val(n).val(n),n&&(m[r][t]=n))}),s){var n=i.find("a").find("i").attr("class");if("sticky-view"==l)v[l][w][b].push({name:o,uniqueId:d,hidden_element:!1,editor_icon:n});else for(var a in y)v[a][w][b].push({name:o,uniqueId:d,hidden_element:!1,editor_icon:n})}(e=z(".whb-modal-wrap")).find(".whb-switcher").find(".whb-field-input").on("change",function(){var e=z(this);e.is(":checked")?(e.attr("value","true"),e.attr("checked","checked")):(e.attr("value","false"),e.removeAttr("checked"))}),e.find(".whb-attach-image").each(function(){var n,a=z(this),e=a.find(".whb-add-image"),i=a.find(".whb-remove-image"),l=a.find(".whb-preview-image");e.on("click",function(e){e.preventDefault();var t=a.find("input.whb-attach-image");t.val();n||(n=wp.media({multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();l.html("").append('<img src="'+e.url+'" alt="">').css("display","block"),t.val(e.id).trigger("input"),i.show()}),n.open()}),i.on("click",function(e){e.preventDefault();e=a.find("input.whb-attach-image");l.html("").hide(),i.hide(),e.attr("value","").trigger("input")})}),e.find(".whb-number-unit").each(function(){var n=z(this),a=n.find('input[type="number"]'),i=n.find(".whb-opts").children("span"),l=n.find(".whb-field-input");i.on("click",function(e){e.preventDefault();var t=z(this),n=t.data("value"),e=a.val();i.removeClass("whb-active"),t.addClass("whb-active"),e&&l.attr("value",e+n).trigger("input")}),a.on("change",function(e){e.preventDefault();z(this);var t=n.find(".whb-opts").children("span.whb-active").data("value"),e=a.val();(e?l.attr("value",e+t):l.attr("value","")).trigger("input")})}),e.find(".whb-custom-select").find(".whb-opts").find("span").on("click",function(){var e=z(this),t=e.closest(".whb-custom-select"),n=t.find(".whb-opts").children("span"),a=t.find(".whb-field-input"),t=e.data("value");n.removeClass("whb-active"),e.addClass("whb-active"),a.val(t).trigger("input")}),e.find(".whb-field-icons-wrap").each(function(){var e=z(this),n=e.find(".wn-icon").find("label"),a=e.find(".whb-field-input");n.on("click",function(e){e.preventDefault();var t=z(this),e=t.attr("for");n.removeClass("whb-active"),t.addClass("whb-active"),a.attr("value",e).trigger("input")})}),e.find(".whb-color-picker").wpColorPicker(),e.find(".whb-field").find(".whb-field-input").each(function(){var e,t,n,a,i,l,s,o,d=z(this);d.hasClass("whb-switcher-field")&&("true"==d.val()?d.attr("checked","checked").trigger("input"):d.removeAttr("checked")),d.hasClass("whb-field-custom-select")&&d.siblings(".whb-opts").find("span").each(function(){var e=z(this);e.removeClass("whb-active"),e.data("value")==d.val()&&e.addClass("whb-active")}),d.hasClass("whb-field-number-unit")&&((a=d.val())?(e=(t=d.closest(".whb-number-unit")).find('input[type="number"]'),i=t.find(".whb-opts").children("span"),t=parseFloat(a),n=a.split(t)[1],e.val(t).trigger("input"),i.each(function(){var e=z(this),t=e.data("value");e.removeClass("whb-active"),t==n&&e.addClass("whb-active")})):d.closest(".whb-number-unit").find('input[type="number"]').val("")),d.hasClass("whb-icon-field")&&(a=d.val(),l=(i=d.closest(".whb-field-icons-wrap")).find(".wn-icon").find("label"),a?(l.removeClass("whb-active"),i.find(".wn-icon").find('label[for="'+a+'"]').addClass("whb-active")):l.removeClass("whb-active")),d.hasClass("whb-attach-image")&&(l=d.val(),s=d.siblings(".whb-remove-image"),o=d.siblings(".whb-preview-image"),l&&!wp.media.attachment(l).destroyed?(0<!h.find(".whb-modal-contents").find(".whb-spinner-wrap").length&&h.find(".whb-modal-contents").prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),wp.media.attachment(l).fetch().always(function(){0<h.find(".whb-modal-contents").find(".whb-spinner-wrap").length&&h.find(".whb-modal-contents").find(".whb-spinner-wrap").remove(),o.html(""),null!=this.attributes.url&&(o.append('<img src="'+this.attributes.url+'" alt="">').css("display","block"),s.show())})):(o.html("").hide(),s.hide()))}),h.find(".whb-dependency").on("change",function(){!function l(e){var t=e.data("dependency");var s=e.find(".whb-field-input").val();z.each(t,function(e,t){for(var n=0;n<t.length;n++){var a=h.find('.whb-field-input[data-field-name="'+t[n]+'"]').closest(".whb-field").hide(),i="whb-field w-col-sm-12 whb-dependency"==a.attr("class");e==s?(a.show(),i&&l($el)):i&&z.each(a.data("dependency"),function(e,t){for(var n=0;n<t.length;n++)h.find('.whb-field-input[data-field-name="'+t[n]+'"]').closest(".whb-field").hide()})}})}(z(this))}),h.find(".whb-dependency").trigger("change"),s&&(t=i[0].outerHTML,z('.whb-elements-item[data-element="'+o+'"][data-unique-id="'+d+'"]').each(function(){z(this).replaceWith(t)})),x(h[0])}}),_()}function x(t){var n=0,a=0,i=0,l=0;function e(e){e=e||window.event,i=e.clientX,l=e.clientY,document.onmouseup=o,document.onmousemove=s}function s(e){e=e||window.event,n=i-e.clientX,a=l-e.clientY,i=e.clientX,l=e.clientY,t.style.top=t.offsetTop-a+"px",t.style.left=t.offsetLeft-n+"px"}function o(){document.onmouseup=null,document.onmousemove=null}t.getElementsByClassName("whb-modal-header")?t.getElementsByClassName("whb-modal-header")[0].onmousedown=e:t.onmousedown=e}function S(e){var t=window.frames.whbIframe.document.getElementsByTagName("head")[0],n=document.createElement("script");n.src=e,t.appendChild(n)}function O(){var n=z("#whbIframe").contents().find("#webnus-header-builder");0==n.children(".whb-spinner-wrap").length&&n.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),o()&&z(".whb_save").css({"background-color":"#ecf9fd","border-color":"#07bbe9",color:"#07bbe9"}),z.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_save_data",nonce:whb_localize.nonce,frontendComponents:JSON.stringify(g)},success:function(e){var t;o()&&(z(".whb_save").css({"background-color":"#ecf9fd","border-color":"#07bbe9",color:"#07bbe9"}),0==(t=z(e)).children(".whb-spinner-wrap").length&&t.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),n[0].outerHTML=t[0].outerHTML),i?z('.redux-action_bar input[name="redux_save"], #whb-publish').trigger("click"):o()&&z.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_live_dynamic_styles",nonce:whb_localize.nonce},success:function(e){e=e,window.frames.whbIframe.document.getElementById("whb-enqueue-dynamic-style").children[0].innerHTML=e,z("#whbIframe").contents().find("#webnus-header-builder").children(".whb-spinner-wrap").remove()}}),o()&&(S((e=whb_localize.assets_url+"src/frontend/")+(t=["whb-jquery-plugins.js","whb-frontend.js"])[0]),S(e+t[1]))}})}function D(){for(var e in g=z.extend(!0,{},v))for(var t in g[e])for(var n in g[e][t]){var a,i,l=g[e][t][n];if("settings"==n)for(a in(d=l.element+"_"+l.uniqueId)in m&&Object.assign(l,m[d]),l)l.hasOwnProperty(a)&&(i=l[a],"hidden_element"!=a&&"boolean"==typeof i&&(l[a]=String(i)));else if(0!=l.length){var s,o=_createForOfIteratorHelper(l);try{for(o.s();!(s=o.n()).done;){var d,r,c,h=s.value;for(r in(d=h.name+"_"+h.uniqueId)in m&&Object.assign(h,m[d]),h)h.hasOwnProperty(r)&&(c=h[r],"hidden_element"!=r&&"boolean"==typeof c&&(h[r]=String(c)))}}catch(e){o.e(e)}finally{o.f()}}}}function I(e){q(e.target.result)}function q(e){var t;e&&(s(e)||(t=e)===Object(t))?(a.css({height:"1px",overflow:"hidden"}).prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),z("#wpwrap").css("display","none"),e=s(e)?JSON.parse(e):e,m=e.whb_data_components,v=e.whb_data_editor_components,g=e.whb_data_frontend_components,i=!0,O()):alert("Header import input is empty! That's why no data can import.")}z("#whbIframe").css("height",C),z("#whbIframe").contents().find("a").on("click",function(){return!1}),p.find(".whb-tab-panel"+p.find(".whb-tabs-list").find("li.w-active").find("a").attr("href")).show(),p.on("click",".whb-tabs-list a",function(e){e.preventDefault();var t=z(this),n=t.parent(),a=t.closest("ul").find("li"),e=t.closest("ul");n.hasClass("w-active")||(a.removeClass("w-active"),n.addClass("w-active"),e.hasClass("whb-element-groups")?p.find(".whb-group-panel").hide().end().find('.whb-group-panel[data-id="'+t.attr("href")+'"]').show():e.hasClass("whb-styling-groups")?e.siblings(".whb-styling-group-panel").hide().end().siblings('.whb-styling-group-panel[data-id="'+t.attr("href")+'"]').show():e.hasClass("whb-styling-screens")?p.find(".whb-styling-screen-panel").hide().end().find('.whb-styling-screen-panel[data-id="'+t.attr("href")+'"]').show():p.find(".whb-tab-panel:not(.whb-group-panel)").hide().end().find(".whb-tab-panel"+t.attr("href")).fadeIn(300))}),z("#whb-desktop-tab, #whb-sticky-tab").on("click",function(e){e.preventDefault(),a.removeClass("whb-tablets-device whb-mobiles-device"),z(".whb-screen-view").hide(),z(".whb-desktop-view, .whb-sticky-view").show()}),z("#whb-tablets-tab").on("click",function(e){e.preventDefault(),a.removeClass("whb-mobiles-device"),a.addClass("whb-tablets-device"),z(".whb-screen-view").hide(),z(".whb-tablets-view").show()}),z("#whb-mobiles-tab").on("click",function(e){e.preventDefault(),a.removeClass("whb-tablets-device"),a.addClass("whb-mobiles-device"),z(".whb-screen-view").hide(),z(".whb-mobiles-view").show()}),p.find(".whb-full-modal-btn").on("click",function(e){e.preventDefault();e=z(this).data("modal-target"),e=p.find('.whb-full-modal[data-modal="'+e+'"]');a.css("overflow","hidden"),e.find("textarea").val(" "),e.fadeIn(200)}),p.find(".whb-full-modal-close").on("click",function(e){e.preventDefault(),a.css("overflow","initial"),p.find(".whb-full-modal").hide()}),p.find(".whb-full-modal").on("click",function(e){e.preventDefault(),a.css("overflow","initial"),p.find(".whb-full-modal").hide()}),p.on("click",".w-add-element",function(e){e.preventDefault();e=z(this);p.find(".whb-elements").show(),f=e.closest(".whb-tab-panel").attr("id"),w=e.closest(".whb-columns").attr("data-columns"),b=e.attr("data-align-col")}),p.on("click",".whb-modal-header i, .whb_close",function(e){e.preventDefault(),p.find(".whb-modal-wrap").hide(),p.find(".whb-modal-wrap[data-element-target]").remove()}),p.find(".whb-modal-wrap").on("click",".whb-elements-item a",function(e){e.preventDefault();var t=z(this),n=(new Date).valueOf(),a=z(this).find("i").attr("class"),i='<span class="whb-controls">\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-copy-btn ti-files"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Settings">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-edit-btn sl-pencil"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Hide">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-hide-btn ti-eye"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="whb-tooltip tooltip-on-top" data-tooltip="Remove">\n\t\t\t\t\t\t\t\t\t\t\t<i class="whb-control whb-delete-btn ti-close"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>';if(t.closest(".whb-elements-item").hasClass("whb-clipboard-item")){var l,s,o=t.parent(),e=o.data("element"),d=e+"_"+o.data("unique-id").toString(),r=e+"_"+n;for(l in m)m.hasOwnProperty(l)&&(s=z.extend(!0,{},m[l]),d==l&&(m[r]=s));c=u.clone().removeClass("w-col-sm-4").attr({"data-unique-id":n}).prepend(i)}else c=t.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":n,"data-hidden_element":!1,"data-editor_icon":a}).prepend(i);p.find('.whb-columns[data-columns="'+w+'"]').find(".whb-col.col-"+b).find(".whb-elements-place").append(c),p.find(".whb-modal-wrap").hide(),k(c,f,!0)}),p.on("click",".whb-copy-btn",function(e){e.preventDefault();e=z(this).closest(".whb-elements-item").clone();u=e.clone(),z(".whb-clipboard-item").remove(),e.removeClass("ui-sortable-handle").addClass("w-col-sm-4 whb-clipboard-item"),e.children(".whb-controls").remove().end().children("img").remove(),e.children("a").css({display:"block","background-color":"#e3e3e3"}),e.find("i").removeClass("ti-control-record").addClass("ti-clipboard").css("color","#f60"),e.find(".whb-element-name").text("Paste (Clipboard)"),z(".whb-modal-wrap.whb-elements").find(".whb-modal-contents").prepend(e)}),p.on("click",".whb-delete-btn",function(e){if(e.preventDefault(),confirm("Press OK to delete element, Cancel to leave")){var t=z(this).closest(".whb-elements-item"),n=t.data("element"),l=t.data("unique-id").toString(),e=n+"_"+l;if(f=t.closest(".whb-tab-panel").attr("id"),w=t.closest(".whb-columns").attr("data-columns"),b=t.closest(".whb-col").attr("data-align-col"),delete m[e],"sticky-view"==f)for(var a=v[f][w][b],i=0;i<a.length;i++)a[i].uniqueId==l&&a.splice(i,1);else for(var s in y){var o=v[s];!function(){for(var e in o){var t,n=o[e];for(t in n)for(var a=n[t],i=0;i<a.length;i++)if(a[i].uniqueId==l)return a.splice(i,1)}}()}D(),O(),_(),p.find('.whb-elements-item[data-element="'+n+'"][data-unique-id="'+l+'"]').remove()}}),p.on("click",".whb-edit-btn",function(e){e.preventDefault();e=z(this);p.find(".whb-modal-wrap").hide(),p.find(".whb-modal-wrap[data-element-target]").remove(),c=e.closest(".whb-elements-item"),f=e.closest(".whb-tab-panel").attr("id"),k(c,f)}),p.find(".whb-tabs-panels").find(".whb-columns").children('.whb-elements-item[data-hidden_element="true"]').find("i.whb-hide-btn").removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash").closest(".whb-columns").addClass("whb-columns-hidden").css("opacity","0.45"),p.find(".whb-elements-place").find('.whb-elements-item[data-hidden_element="true"]').find("i.whb-hide-btn").removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),p.on("click",".whb-hide-btn",function(e){e.preventDefault();var t,n=z(this),a=n.closest(".whb-elements-item"),e=a.data("element"),i=a.data("unique-id").toString();if(f=a.closest(".whb-tab-panel").attr("id"),w=a.closest(".whb-columns").attr("data-columns"),b=a.closest(".whb-col").attr("data-align-col"),"header-area"==e||"sticky-area"==e){e=v[f][w].settings.hidden_element;v[f][w].settings.hidden_element=!e,a.attr("data-hidden_element",t=!e).data("hidden_element",!e);e=a.closest(".whb-columns");t?(n.removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),e.addClass("whb-columns-hidden").css("opacity","0.45")):(n.removeClass("wn-far wn-fa-eye-slash").addClass("ti-eye"),e.removeClass("whb-columns-hidden").css("opacity","1"))}else{for(var l=v[f][w][b],s=0;s<l.length;s++){var o=l[s];if(o.uniqueId==i){o.hidden_element=!o.hidden_element,t=o.hidden_element,a.attr("data-hidden_element",o.hidden_element).data("hidden_element",o.hidden_element);break}}t?(n.removeClass("ti-eye").addClass("wn-far wn-fa-eye-slash"),a.find("a").css("color","#888"),a.addClass("whb-columns-hidden").css("opacity","0.45")):(n.removeClass("wn-far wn-fa-eye-slash").addClass("ti-eye"),a.find("a").css("color","#0073aa"),a.removeClass("whb-columns-hidden").css("opacity","1"))}D(),O(),_()}),p.on("click",".whb_save",function(e){e.preventDefault();z(this);var t=c.data("element"),e=c.data("unique-id"),n=t+"_"+e;h.find(".whb-field").each(function(){var e=z(this).find(".whb-field-input"),t=e.data("field-name"),e=e.val();""==e?m[n].hasOwnProperty(t)&&(m[n][t]=e):null!=e&&("string"==typeof e&&-1!=e.indexOf('"')&&(e=e.replace(/"/g,"'")),m[n][t]=e)}),D(),O(),_();var a=c[0].outerHTML,i=p.find('.whb-elements-item[data-element="'+t+'"][data-unique-id="'+e+'"]');i.each(function(){z(this).replaceWith(a)}),i=p.find('.whb-elements-item[data-element="'+t+'"][data-unique-id="'+e+'"]'),h.find(".whb-field.whb-placeholder").each(function(){var e,t=z(this);t.hasClass("whb-img-placeholder")&&((e=t.find(".whb-field-input").val())?wp.media.attachment(e).fetch().done(function(){0<!i.children(".whb-img-placeholder-el").length?i.attr("data-img-placeholder",e).children("a").hide().after('<img class="whb-img-placeholder-el" src="'+this.attributes.url+'" alt="" />'):i.children(".whb-img-placeholder-el").attr("src",this.attributes.url)}):i.removeAttr("data-img-placeholder").children("a").show().end().children(".whb-img-placeholder-el").remove()),t.hasClass("whb-text-placeholder")&&((t=t.find(".whb-field-input").val()).trim()?0<!i.find("a").find(".whb-text-placeholder-el").length?i.find("a").find(".whb-element-name").hide().after('<span class="whb-text-placeholder-el">'+t+"</span>"):i.find("a").find(".whb-text-placeholder-el").html(t):i.find("a").find("span.whb-element-name").show().end().end().find(".whb-text-placeholder-el").remove())}),o()||(p.find(".whb-modal-wrap").hide(),p.find(".whb-modal-wrap[data-element-target]").remove())}),t.sortable({connectWith:".whb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(e,t){t=z(t.item);f=t.closest(".whb-tab-panel").attr("id"),w=t.closest(".whb-columns").attr("data-columns"),b=t.closest(".whb-col").attr("data-align-col")},beforeStop:function(e,t){for(var n=z(t.item),a=n.closest(".whb-elements-place"),t=n.data("element"),i=n.data("unique-id").toString(),l=v[f][w][b],s=0;s<l.length;s++)l[s].uniqueId==i&&l.splice(s,1);w=n.closest(".whb-columns").attr("data-columns"),b=n.closest(".whb-col").attr("data-align-col");a=a.children(".whb-elements-item").map(function(e,t){return{name:(n=z(t)).data("element"),uniqueId:n.data("unique-id").toString(),hidden_element:JSON.parse(n.data("hidden_element")),editor_icon:n.data("editor_icon")}}).get();v[f][w][b]=a,D(),O(),_()}}).disableSelection(),x(z(".whb-modal-wrap")[0]),z('.redux-action_bar input[name="redux_save"], #whb-publish').on("click",function(e){e.preventDefault(),0==p.children(".whb-spinner-wrap").length&&p.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>');var t=z("#whbIframe").contents().find("#webnus-header-builder");0==t.children(".whb-spinner-wrap").length&&t.prepend('<div class="whb-spinner-wrap"><div class="whb-spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),z.ajax({type:"POST",url:whb_localize.ajaxurl,data:{action:"whb_publish",nonce:whb_localize.nonce,components:JSON.stringify(m),editorComponents:JSON.stringify(v),frontendComponents:JSON.stringify(g)},success:function(e){console.log(e),p.children(".whb-spinner-wrap").remove(),t.children(".whb-spinner-wrap").remove(),i&&location.reload()}})}),z(".whb-action-collapse").on("click",function(){var e=z(this),t=z(".wn-header-builder-wrap.whb-frontend-builder").css("bottom","-60%"),n=z(".whb-actions").css("bottom","0");e.hasClass("whb-open")?(t.css("bottom","-60%"),n.css("bottom","0"),e.removeClass("whb-open"),e.children("i").attr("class","ti-arrow-circle-up")):(t.css("bottom","0"),n.css("bottom","60%"),e.addClass("whb-open"),e.children("i").attr("class","ti-arrow-circle-down"))}),z("#whb-import").change(function(e){var t=event.target.files[0],n=new FileReader;n.onload=I,n.readAsText(t)}),p.find(".whb-prebuild-item").on("click",function(e){e.preventDefault(),confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")&&(e=z(this).data("file-name"),z(".whb-full-modal"),e=whb_localize.prebuilds_url+e,z.ajax({dataType:"json",type:"POST",url:e,success:function(e){q(e)}}))}),"vertical"==v["desktop-view"].row1.settings.header_type&&(r=(d=p.find(".whb-tabs-panels")).find("#desktop-view").children('.whb-columns[data-columns="row1"]').children(".whb-elements-item"),C=z("#whb-vertical-header"),r.attr("data-element","vertical-area"),C.find("span").text("Horizontal Header"),d.addClass("whb-vertical-header-panel"),l.sortable({axis:"y"})),p.on("click","#whb-vertical-header",function(e){e.preventDefault();var t=z(this),n=z(".whb-tabs-list"),a=p.find(".whb-tabs-panels"),i=a.find("#desktop-view").children('.whb-columns[data-columns="row1"]').children(".whb-elements-item"),e=v["desktop-view"].row1.settings;"horizontal"==e.header_type?(e.element="vertical-area",i.attr("data-element","vertical-area"),e.header_type="vertical",t.find("span").text("Horizontal Header"),a.addClass("whb-vertical-header-panel"),l.sortable({axis:"y"})):(e.element="header-area",i.attr("data-element","header-area"),e.header_type="horizontal",t.find("span").text("Vertical Header"),a.removeClass("whb-vertical-header-panel"),l.sortable({axis:""}),z("#wrap").removeClass("whb-header-vertical-toggle")),D(),O(),_(),n.find("li").removeClass("w-active"),n.find("li:first-child").addClass("w-active"),z(".whb-tab-panel").hide(),z("#desktop-view").show()}),z(".whb-languages").length&&(z(".whb-languages").niceSelect(),z("select.whb-languages").change(function(){var e=z(this).children("option:selected").val();location.replace(window.location.href+"&lang="+e)}))})})}(jQuery);
//# sourceMappingURL=whb-editor.js.map
