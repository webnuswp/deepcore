{"version":3,"sources":["whb-editor.js"],"names":["window","onload","document","body","style","display","$","on","$currentElement","$currentModalEdit","currentCell","currentRow","currentPanel","$clipboardElem","key","elemUniqueID","$body","$wrap","$sortablePlaces","find","$desktopSortablePlaces","components","Array","isArray","whb_localize","editorComponents","editor_components","frontendComponents","platforms","desktop-view","tablets-view","mobiles-view","importButtonFlag","console","log","JSON","str","parse","e","whbIsFrontendBuilder","hasClass","whbDebug","hasOwnProperty","element","search","slice","each","$logo","wp","media","attachment","logo","fetch","done","children","hide","after","this","attributes","url","$panels","$settings","docHeight","height","whbElementSettings","new_el","arguments","length","undefined","elemName","attr","$tabPanels","elemID","fieldName","data","prepend","fieldStd","ajax","type","$fieldInput","el_name","success","remove","append","elemEditorIcon","removeClass","name","uniqueId","addClass","hidden_element","show","currentElemHtml","editor_icon","whbFields","whbFieldDependency","whbModalDraggable","val","push","dependencyData","i","haveDependency","$elem","platform_key","$modalWrap","event","preventDefault","$this","$imgIdInput","$imgContainer","$delImgLink","removeAttr","$inputNumber","frame","$option","state","get","first","toJSON","$customSelect","css","id","trigger","open","$iconClass","$icon","html","$numberUnit","unit","num_val","value","closest","valueUnit","numberValue","$iconsWrap","siblings","wpColorPicker","placeholder","tolerance","start","elemFromCell","connectWith","forcePlaceholderSize","parseFloat","split","beforeStop","start_cell_obj","destroyed","always","whbEditorDraggable","getElementsByClassName","onmousedown","$parent","parentValue","$addImgLink","els","$el","elem_value","elems","multiple","outerHTML","replaceWith","pos1","pos2","pos3","pos4","$actions","clientX","$editor","whbCloseModalDraggable","whbElementDrag","clientY","top","offsetTop","left","offsetLeft","onmouseup","onmousemove","whb_drag_mouse_down","whbInjectScriptToIframe","src","scripts","getElementsByTagName","myScript","iframeHead","appendChild","whbSaveAllData","$WHBFrontend","cell_key","screen_key","component_key","Object","assign","box-shadow","border-color","cell","action","nonce","stringify","background-color","$newWHBFrontend","el","ajaxurl","styles","frames","getElementById","innerHTML","contents","path","assets_url","content","extend","rowKey","alert","String","_step","_iterator","_createForOfIteratorHelper","s","n","$modal","dataType","whbImport","err","f","header_type","obj","desktopRow1Settings","sortable","axis","whb_data_components","whb_data_editor_components","whb_data_frontend_components","parent","$currentTab","$tabs","end","$tabUl","fadeIn","modalTarget","uniqueID","valueOf","editorIcon","controlsHtml","clone","newElem","data-unique-id","data-hidden_element","text","findInCell","confirm","panel","toString","whbCreateFrontendComponents","row","mustBeHidden","$row","fieldValue","replace","imageID","$currentElements","textValue","indexOf","ui","item","$els_place","splice","map","createElement","res","location","reload","change","file","target","files","reader","FileReader","onReaderLoad","fileName","$select","$headerSwitcher","row1","settings","niceSelect","language","href","jQuery"],"mappings":"gpCAMAA,OAAOC,OAAS,WACfC,SAASC,KAAKC,MAAMC,QAAU,SAD/BL,SAAOC,GACNC,EAAAA,UAASC,MAAKC,WADfE,EAAAN,QAAAO,GAAA,OAAA,WAWA,IAIGC,EACAC,EAgBIC,EAAJC,EACAC,EAUAC,EA+CSC,EAIFC,EAnFVC,EAAAV,EAAA,QACAW,EAAAX,EAAA,sBACGY,EAAAD,EAAAE,KAAA,uBACAC,EAAAH,EAAAE,KAAA,sBAAAA,KAAA,qCAAAA,KAAA,uBAKAE,EAAIZ,aAEJY,aAAAC,MAAAC,QAAAC,aAAAH,YAAAG,aAAAH,WAAA,GAEII,EAAmBD,aAAaE,mBAAqD,GADzFC,EAAiBH,aAAaH,qBAAwDG,GACtFI,EAAIH,CACJI,eAAIF,GACJG,eAAe,GACdC,eAAA,IAWDC,GAAoB,EAanBC,SAAAA,IACAA,QAAAA,IAAQC,iBAAI,qDAA2Bb,GACvCY,QAAAC,IAAA,wBAAA,qDAAAT,GADAQ,QAAQC,IAAI,0BAA2B,qDAAsDP,GAO5FQ,SAAAA,EAAWC,GACX,IACAD,KAAAE,MAAAD,GACA,MAAAE,GADA,OAGD,OAAA,EAcD,SAAAC,IACC,QAAAvB,EAAIA,SAAMwB,6BAYX,IAAS1B,KArCT2B,IAqCgBpB,EAAhBA,EAAAqB,eAA4B5B,IAAA,WAC3B,IAAA6B,EAAItB,EAAWqB,IAAqB,GAAA5B,EAAA8B,OAG9B7B,UAAAA,EAAeD,EAAI+B,MAAM,KAHK5B,EAAAE,KAAA,2DAAAJ,EAAA,MAAA+B,KAAA,WACnC,IAAAC,EAAMJ,EAAAA,MAKJK,GAAGC,MAAMC,WAAWP,EAAQQ,MAAMC,QAAQC,KAAK,WAJjDN,EAAAO,SAAQV,KAAOW,OAAXC,MAAJ,4CAA8BC,KAAAC,WAAAC,IAAA,kBAHJ,GAiB/B,IAowCQC,EACAC,EArwCRC,EAAAxD,EAAAJ,UAAA6D,SAmhBO,SAAAC,EACDxD,EAAAI,EADC,GACD,IAAAqD,EAAA,EAAAC,UAAAC,aAAAC,IADC,GAAA,EA7CCC,EAAW7D,EAAgB8D,KAAK,gBAChCvD,EAAeP,EAAgB8D,KAAK,kBA8CtCC,EAAAA,EAAgB,IAAAxD,EAGhBN,EAAAA,eAAA+D,KA7CDnD,EAAWmD,GAAU,IAmDc,GAAjCvD,EAAAqC,SAAImB,qBAAwBC,QAC5BzD,EAAA0D,QAAIC,2IA5CPtE,EAAEuE,KAAK,CAkDJC,KAAA,OACCC,IAAAA,aAAAA,QACAL,KAAA,CACAK,OAAAA,2BACAC,QAFMX,EAGNU,MAAAA,aAAAA,OACAE,QAAA,SAAIL,GAC6BA,EAAhCvD,EAAAA,SAAAA,qBAAA8C,QACAlD,EAAAqC,SAAA,qBAAA4B,SA7CH5E,EAAE,2BAA2B6E,OAAOT,IAkDnCjE,EAAI2E,EAAcjE,KAAGX,wCAAyC6D,EAA9D,OAEC5C,KAAAA,kBAA+Bd,KAAAA,MAA/B0E,YAAA,YACCC,EAAMjB,KAAAA,kBADsDd,OAE5DgC,EAAAA,KAAUxE,kBAFkDI,KAAA,YAAAqE,SAAA,YAG5DC,EAAAA,KAAAA,uBAH4DnC,SAAA,wBAAAoC,OAAA,IAiFrEC,EAjFqEpB,EAA7D9D,EAAAU,KAAA,uBAAAmC,SAAA,kBAHF,GASQ,gBAAN1C,EACA2D,EAAApD,KAAK,kCAA+BuE,OACnCjE,gBAAAA,EACC6D,EAAAA,KAAAA,sCAD4DI,OAElD3E,gBAAVwE,EACAE,EAAAA,KAAAA,sCAH4DC,OAI/CN,eAAbQ,GAJ4DrB,EAAApD,KAA7D,kCAAAuE,OAQFnB,EAEDpD,KAAA,kBAAAA,KAAA,wBAAAuE,OACAG,EA5EwBH,OAgFvBI,EAAAA,KAAAA,cAAAhD,KAAA,WACA,IACDrC,EAHAH,EAAAmD,MAGkBtC,KAAK,oBA/ClBsD,EAAYM,EAAYL,KAAK,cAoDjCpE,OAAE,KAFHsE,EAAAG,EAAYL,KAAA,cAETE,EAAA,GA7CEG,EAAYvC,SAAS,sBAkD1BuD,EAAAA,IAAAA,EAAkBtF,GAAAA,IAAlBuF,IAAA3E,EAAAmD,GAAAC,SACA,IAAApD,EAAAmD,GAAAC,GArGKM,EAAPiB,IAAA3E,EAAAmD,GAAAC,KAyGAM,EAAAiB,IAAApB,GAAAoB,IAAApB,GAGDA,IACHvD,EAAAmD,GAAAC,GAAAG,MA/CUX,EAAQ,CAmDf,IAAAmB,EAASU,EAA4B3E,KAAA,KAAAA,KAAA,KAAAmD,KAAA,SACpC,GAAkB,eAAlB1D,EACAa,EAAeb,GAAgBD,GAAAD,GAA/BuF,KAAA,CAECX,KAAMY,EACNX,SAASY,EAERV,gBAAYhF,EACZmF,YAAIQ,SAGHC,IAAAA,IAAAA,KAAAzE,EAnDEH,EAAiB6E,GAAc3F,GAAYD,GAAauF,KAAK,CAoD/DX,KAAAjB,EACCyB,SAAAA,EACAL,gBAAA,EACDG,YAAMR,KAgFPmB,EAEDjG,EAAA,oBAECkG,KAAMC,iBAANtF,KAAA,oBAAAZ,GAAA,SAAA,WAEA,IAAAmG,EAAIC,EAAAA,MAGJC,EAAAA,GAAAA,aA9DAF,EAAMpC,KAAK,QAAS,QAiEpBuC,EAAAA,KAAAA,UAAA,aAGAF,EAAAA,KAAAA,QAAYrC,SACZoC,EAbDI,WAAA,cAmBAP,EAAIQ,KAAAA,qBAA2B5F,KAAK,WACpC,IAAA6F,EACAN,EAAI3B,EAAAA,MAEJkC,EAAWP,EAAXvF,KAAoB,kBACnBqF,EAAMC,EAAAA,KAAN,qBAEAG,EAAaF,EAAbvF,KAAA,sBAIA8F,EAAAA,GAAQ5B,QAAAA,SAAYmB,GACpBE,EAAAA,iBACA,IAAAC,EAAAD,EAAavF,KAAA,0BACZ4D,EAAAiB,MAODgB,IAMCA,EAFDhE,GAAAC,MAEO,CACN8B,UAAAA,KAlEKxE,GAAG,SAAU,WAyEpB,IAAA2C,EAAc8D,EAAdE,QAAAC,IAAA,aAAAC,QAAAC,SAGAT,EAAI7B,KAAW,IAAGuC,OAAAA,aAAmBpE,EAAAS,IAArC,aAAA4D,IAAA,UAAA,SAIAb,EAAMlB,IAAAA,EAASgC,IAAfC,QAAA,SArEEZ,EAAYnB,SAiDbsB,EAAAU,SAkCAb,EAAIc,GAAAA,QAAajB,SAAAF,GAEjBoB,EAAAA,iBAEA7C,EAAYT,EAAKnD,KAAA,0BAzEjByF,EAAciB,KAAK,IAAItE,OAkF7BsD,EAAAtD,OA5EMoD,EAAYrC,KAAK,QAAS,IAAImD,QAAQ,aAoFtClB,EAAApF,KAAI4D,oBAAqBjC,KAAQ,WAChCiC,IAAAA,EAAAA,EAAWtB,MACXsD,EAAMe,EAAA3G,KAAA,wBACN4D,EAAAA,EAAY+B,KAAZ,aAAAxD,SAAA,QACAyB,EAAA+C,EAAA3G,KAAA,oBA7EF8F,EAAQ1G,GAAG,QAAS,SAAUiG,GAC7BA,EAAMC,iBAiFN1B,IAAAA,EAAAA,EAAAA,MACCgD,EAAArB,EAAShC,KAAK,SACdgC,EAAMrB,EAAYW,MAClBiB,EAAA5B,YAAUX,cACTgC,EAAAA,SAAK,cACLsB,GACDjD,EANDT,KAAA,QAAA0D,EAAAD,GAAAN,QAAA,WAUDV,EAAIhC,GAAAA,SAAYvC,SAASgE,GACxBA,EAAAC,iBAEIwB,EAAAA,MAAJ,IACCF,EAAAD,EAAe3G,KAAG4D,aAAYmD,SAAQ,mBAAtCxD,KAAA,SACAsD,EAAIjB,EAAee,OAEnBE,EACAjD,EAAIoD,KAAAA,QAAYF,EAAYG,GAG5BnB,EAAAA,KAAQnE,QAAK,KAHesF,QAA5B,aASE1B,EAAAA,KAAAA,sBAAevF,KAAf,aAAAA,KAAA,QAAAZ,GAAA,QAAA,WACA,IAAAmG,EAAApG,EAAAmD,MACD6D,EARDZ,EAAAwB,QAAA,sBASAjB,EAAMK,EAAAnG,KAAA,aAAAmC,SAAA,QACNyB,EAAAA,EAAoB5D,KAAA,oBACpB8G,EAAAvB,EAAAhC,KAAA,SA7EFuC,EAAQ5B,YAAY,cACpBqB,EAAMlB,SAAS,cAgFfT,EAAIA,IAAAA,GAAYvC,QAAS,WA3E1B+D,EAAWpF,KAAK,yBAAyB2B,KAAK,WAgF5C,IAAAuF,EAAA/H,EAAWmD,MACVmE,EAAAA,EAAMvC,KAAY,YAAlBlE,KAAA,SACAkH,EAAAA,EAAgBlH,KAAA,oBAEhByG,EAAAA,GAAAA,QAAMvC,SAAYmB,GAClBA,EAAAC,iBA7ED,IAAIC,EAAQpG,EAAEmD,MACVkE,EAAajB,EAAMpC,KAAK,OAiF5BsD,EAAAvC,YAAUN,cACV2B,EAAAlB,SAAIqB,cACJ9B,EAAI6B,KAAAA,QAAgB7B,GAAYuD,QAAZ,aAKlB/B,EAAApF,KAAA,qBAAAoH,gBAMA3B,EAAAA,KAAAA,cAAAzF,KAAA,oBAAA2B,KAAA,WA7EH,IAyGA0F,EAEAC,EACAC,EAkBET,EACCU,EAWApD,EACAE,EACAG,EA5ICb,EAAczE,EAAEmD,MAgFhBmD,EAAAA,SAAAA,wBA5EsB,QAArB7B,EAAYiB,MA8Eba,EAAAA,KAAAA,UAAA,WAAAY,QAAA,SAED1C,EAXD+B,WAAA,YAgBAD,EAAAA,SAAA,4BACA9B,EAAAuD,SAAA,aAAAnH,KAAA,QAAA2B,KAAA,WACD,IAAA4D,EAAApG,EAAAmD,MACDiD,EA7FDrB,YAAA,cA8FAqB,EAAAhC,KAAA,UAAAK,EAAAiB,OAGDU,EAAAlB,SAAA,gBAzEMT,EAAYvC,SAAS,4BACpByF,EAAQlD,EAAYiB,QAiFzBwC,GADAI,EAAa7D,EAAAmD,QADW,qBAEX/G,KAAA,wBACb0H,EAAAA,EAAsB1H,KAHE,aAAAmC,SAAA,QAIxBmF,EAAWK,WAJab,GAKxBS,EAAOT,EAAAc,MAAUvC,GAAW,GAG3B5F,EAAAA,IAAYwH,GAASF,QAAQ,SA7E5BjB,EAAQnE,KAAK,WA8EdnC,IAAAA,EAAAA,EAAU8C,MA5EJsE,EAAOrB,EAAMhC,KAAK,SA8ExBgC,EAXuBrB,YAAA,cAYxB2D,GAAUb,GACTzB,EAAAlB,SAAYlF,iBAIZyE,EAAIP,QAASH,oBAAiBtD,KAAAA,wBAA9BiF,IAAA,KAKAjB,EAASoB,SAAQ,oBAChB8B,EAAIgB,EAAAA,MAEHrB,GADAe,EAAAA,EAAeM,QAAAA,0BACf9H,KAAA,YAAAA,KAAA,SA1EE8G,GACHL,EAAMvC,YAAY,cA6EnB1E,EAAAA,KAAU,YAASuH,KAAQ,cAAgB5D,EAAK,MAAAkB,SAAiB,eACjE9E,EAAAA,YAAW,eAIT4E,EAAI9C,SAAQkC,sBACZa,EAAAA,EAAUc,MACVZ,EAAAA,EAAoB6C,SAAOjC,qBAC3BT,EAAAA,EAAmBlB,SAAK,sBAEzBsB,IARmBhD,GAnBYC,MA6BhCC,WAAA8C,GAAAkD,WA3EuF,GAAjFzI,EAAkBU,KAAK,uBAAuBA,KAAK,qBAAqBgD,QA4E9E1C,EAAAA,KAAiBb,uBAAjB+D,QAA2CjE,2IAI3C+B,GAAAA,MAAAA,WAAQuD,GAAA5C,QAAA+F,OAAA,WACR,EAAA1I,EAAAU,KAAA,uBAAAA,KAAA,qBAAAgD,QA/CF1D,EAAAU,KAAA,uBAAAA,KAAA,qBAAA+D,SA1BI0B,EAAciB,KAAK,IA8ExBzD,MAFAgF,KAAAA,WAEAzF,MACAiD,EAASb,OAAAA,aAA2BtC,KAAAC,WAAAC,IAAA,aAAA4D,IAAA,UAAA,SACnCV,EAAAnB,YAMC/C,EAAQ0G,KAAAA,IAAAA,OAER1G,EAAQ2G,WA7XP7I,EAAkBU,KAAK,mBAAmBZ,GAAG,SAAU,YA8ExD,SAAAuF,EAAAyD,GACA,IAAArD,EAAcqD,EAAd7E,KAAA,cACA,IAAA8E,EAAIC,EAAc/C,KAAMvF,oBAAN6E,MAElB1F,EAAAwC,KAAAoD,EAAiB,SAAS/E,EAAKuI,GAnD/B,IAAK,IAAIvD,EAAI,EAAGA,EAAIuD,EAAIvF,OAAQgC,IAAK,CAuDpCK,IAAAA,EAAMC,EAANtF,KAAA,qCAAAuI,EAAAvD,GAAA,MAAA+B,QAAA,cAAA3E,OAEA6C,EAA6B,wCAAdC,EAAGK,KAAMvF,SAGxB8G,GAAKuB,GAtDJnD,EAAMX,OAyDPU,GACCY,EAAA2C,MArDIvD,GACH9F,EAAEwC,KAAKuD,EAAM3B,KAAK,cAAe,SAAUkF,EAAYC,GAyDzD7C,IAAAA,IAAKb,EAAK,EAAClD,EAAM4G,EAAA1F,OAAAgC,IAChB2D,EAAU3I,KAAM,qCAAA0I,EAAA1D,GAAA,MAAA+B,QAAA,cAAA3E,YAlDlBuC,CArBDxF,EAAAmD,SAyBDhD,EAAAU,KAAA,mBAAAsG,QAAA,UAGHxD,IACA0B,EAAAnF,EAAA,GAAAuJ,UAnDOzJ,EAAE,oCAAsC+D,EAAW,sBAAwBtD,EAAe,MAAM+B,KAAK,WACpGxC,EAAEmD,MAAMuG,YAAYrE,MAuDxBY,EAAgB9F,EAAiBU,OAI/BuF,IA2XA,SAAAX,EAAApD,GAlBK,IAAAsH,EAAP,EAoBAC,EAlCD,EAqCAC,EAAA,EACHC,EAAA,EAOI,SAAIC,EAAa/H,GAGjBA,EAAAA,GAAAtC,OAAAwG,MA7EC2D,EAAO7H,EAAEgI,QA8EVF,EAAI/D,EAAAA,QACHkE,SAAAA,UAAYC,EACZH,SAAAA,YAAaI,EAGb,SALDA,EAKOnI,GACNiI,EAAAA,GAAAA,OAAA/D,MACA6D,EAAAA,EAAS9C,EAAAA,QACTlB,EAAAA,EAAMb,EAAAA,QACNa,EAAAA,EAAAA,QACA+D,EAAA9H,EAAAoI,QACD/H,EAlBDvC,MAAAuK,IAAAhI,EAAAiI,UAAAV,EAAA,KAqBAvH,EAAAvC,MAAAyK,KAAAlI,EAAAmI,WAAAb,EAAA,KAGH,SAAAO,IACAtK,SAAA6K,UAAA,KA9EK7K,SAAS8K,YAAc,KAmD5BrI,EAAA0G,uBAAA,oBACA1G,EAAA0G,uBAAA,oBAAA,GAAAC,YAAA2B,EACG3K,EAAEgJ,YAAA2B,EA2GE,SAAAC,EACCC,GAGDD,IAAAA,EAAAA,OAAAA,OAAAA,UAA+BE,SAA/BC,qBAAA,QAAA,GACAH,EAAAA,SAAAA,cAA4B,UAC5BI,EAAAH,IAAAA,EACDI,EAAAC,YAAAF,GAaD,SAAAG,IACC,IAAAC,EAASC,EAAAA,cAAYhK,WAAAA,KAAmBiK,0BAGX,GAA5BF,EAAIC,SAAY,qBAAYxH,QAC3BuH,EAAA/G,QAAIN,2IAhFJ9B,KAoFAjC,EAAA,aAAIuL,IAAAA,CACHC,mBAAOC,UACPC,aAAA,0BAlFHC,eAAgB,YAIlB3L,EAAEuE,KAAK,CAkFDC,KAAA,OACCoH,IAAAA,aAAAA,QACAxH,KAAA,CACDyH,OAAA,gBACDC,MAAA5K,aAAA4K,MACDzK,mBAAMQ,KAAAkK,UAAA1K,IACgBsD,QAAA,SAAAP,GAAA,IA8B9B0G,EA9B8B7I,MA9EvBjC,EAAE,aAAaiH,IAAI,CA8EI+E,mBAAA,UACrBN,aAAA,0BAAqBC,eAAA,YAMnB,IAHDM,EAAIV,EAAAA,IAGHC,SAAOC,qBAAsBF,QAC7BU,EAAA5H,QAAA,2IAEA+G,EAAA,GAAA3B,UAAOrH,EAAH,GAAwBqH,WAE3B/H,EACCwK,EAAAA,4DAAA/E,QAAA,SAEDlF,KACDjC,EAAAuE,KAAA,CACDC,KAAA,OAjBoBnB,IAAAnC,aAAAiL,QAAA/H,KAAA,CAAAyH,OAAA,0BAAAC,MAAA5K,aAAA4K,OAkBrBnH,QAAA,SAAAP,GA/CNgI,EAgDKhI,EA/CR1E,OAAA2M,OAAA,UAAAzM,SACA0M,eAAA,6BAAAtJ,SAAA,GAAAuJ,UAAAH,EA+COpM,EAAA,cAAAwM,WAAA3L,KAAA,0BAAAmC,SAAA,qBAAA4B,YAQP3C,MAII2I,GAHJ6B,EAAAvL,aAAAwL,WAAA,kBACA5B,EAAA,CACG,wBAtEK,oBAuEgC,IACpCF,EAAW6B,EAAmB3B,EAA9B,QAWA,SAAI6B,IAEF,IAAA,IAAArB,KADD5K,EAAUV,EAAA4M,QAAA,EAAA,GAAAzL,GAET,IAAA,IAAA0L,KAAYxL,EAAAiK,GAFH,IAAV,IAGGjH,KAAQhD,EAAAiK,GAAAuB,GAAA,CACX7M,IAUDQ,EAIJmH,EAdMiE,EAACvK,EAAFiK,GAAAuB,GAAAxB,GAEAtK,GAAa4L,YAAb5L,EAQD,IAAAP,KALCkB,EAFAP,EAAgBkB,QAEhB,IADAhB,EAAAA,YAGMN,GACN+L,OAAMrB,OAAAG,EAAA7K,EAAAwK,IAEPK,EAGDA,EAAAxJ,eAAA5B,KACHmH,EAAAiE,EAAApL,GACA,kBAAAA,GAAA,kBAAAmH,IACAiE,EAAApL,GAAAuM,OAAApF,UAGIzB,GAAMC,GAAND,EAAMC,OAAN,CAAA,IAAA6G,EAAAC,EAAAC,2BAnEoBtB,GAmEpB,IAnEK,IAAAqB,EAAAE,MAAAH,EAAAC,EAAAG,KAAArK,MAAqB,CAAA,IAsErBsK,EAGG7M,EAKDmM,EA9EOT,EAAYc,EAAArF,MA4ExBtE,IAHM7C,KAHH6M,EAFOnB,EAAAlH,KAEI,IADHkH,EAAIjH,YAITlE,GACNuM,OAAAA,OAAUpB,EADJnL,EAAAwK,IAAAW,EAINvH,EAAAA,eAASnE,KACJmM,EAAOT,EAAG9H,GACL,kBAATmJ,GAAA,kBAAA5F,IACAuE,EAAA1L,GAAAuM,OAAApF,MAbH,MAAA6F,GAAAP,EAAAjL,EAAAwL,GAAA,QAAAP,EAAAQ,OAyCA,SAAInK,EAAU3C,GACd4M,EAAIhK,EAAAA,OAAYD,QAnEjB,SAASiK,EAAUZ,GA3vClB,IAAenB,EAk0CfmB,IAAIe,EAAef,KAl0CJnB,EAk0CkBmB,KA/zClCnB,OAAAmC,KAg0CEC,EAAAA,IAAAA,CACArK,OAAAA,MACAqK,SAAAA,WACAxH,QAAMvF,2IACNyC,EAAAA,WAAQ4B,IAAAA,UAAS,QACjBpE,EAAAA,EAAAA,GAAuB+M,KAAvB9L,MAAgC4K,GAAAA,EAC/BmB,EAAMnB,EAAAoB,oBADyB5M,EAAhCwL,EAAAqB,2BAGA3M,EAAMsL,EAAAsB,6BACNL,GAAAA,EACArK,KAEA6C,MAAAA,gEAryCLpG,EAAA,cAAAiH,IAAA,SAAAzD,GACAxD,EAAA,cAAAwM,WAAA3L,KAAA,KAAAZ,GAAA,QAAA,WACA,OAAA,IAqBAU,EAAAE,KAAA,iBAAAF,EAAAE,KAAA,kBAAAA,KAAA,eAAAA,KAAA,KAAAmD,KAAA,SAAAoB,OACAzE,EAAAV,GAAA,QAAA,mBAAA,SAAAiG,GACAA,EAAAC,iBAMI,IAAIC,EAAQpG,EAAEmD,MAJfxC,EAAWyF,EAAA8H,SACXvN,EAASyF,EAATwB,QAAkB,MAAA/G,KAAA,MACjBqF,EAAMC,EAAAA,QAAN,MAGAgI,EAAIA,SAAc/H,cAElBgI,EAAArJ,YAAaqB,YAKZ+H,EAAYjJ,SAAS,YADrBkJ,EAAMrJ,SAAAA,sBACNoJ,EAAAA,KAAAA,oBAAqBlL,OAErBoL,MAAAxN,KAAA,6BAAAuF,EAAApC,KAAA,QAAA,MAAAoB,OAGWkJ,EAAOpM,SAAS,sBAF3BoM,EAAAtG,SAAW9F,4BAAPe,OAAuCoL,MAAArG,SAAA,qCAAA5B,EAAApC,KAAA,QAAA,MAAAoB,OAC1CzE,EAAWuB,SAAA,uBACXvB,EAFDE,KAEO,6BAAoBoC,OAAAoL,MAApBxN,KAA2C,sCAAAuF,EAAApC,KAAA,QAAA,MAAAoB,OAEjDzE,EAFME,KAEA,wCAAoBoC,OAAwBoL,MAAAxN,KAAA,iBAAAuF,EAAApC,KAAA,SAAAuK,OAAA,QAMpDvO,EAAA,qCAEDC,GAAA,QAAA,SAAA+B,GAECA,EAAEmE,iBADHnG,EAAE+E,YAAA,yCACD/C,EAAAA,oBAAAiB,OACAvC,EAAAA,uCAAkB0E,SAGlBpF,EAAA,oBALDC,GAAA,QAAA,SAAA+B,GAOAhC,EAAAA,iBACCgC,EAAEmE,YAAAA,sBACFzF,EAAAA,SAAMqE,sBACNrE,EAAAA,oBAAeuC,OACfjD,EAAAA,qBAAEoF,SAIHpF,EAAAA,oBAAEC,GAAoBA,QAAG,SAAS+B,GACjCA,EAAAA,iBACAtB,EAAAA,YAAMqE,sBACNrE,EAAAA,SAAMwE,sBACNlF,EAAAA,oBAAEiD,OACFjD,EAAAA,qBAAEoF,SAYFc,EAAAA,KAAMC,uBAANlG,GAAA,QAAA,SAAAiG,GAEAA,EAAAC,iBAIAzF,EAFI2M,EAAMlK,MAEViB,KAAsB,gBACtBiJ,EAAOxM,EAAKA,KAAA,+BAAZ2N,EAAA,MAEA9N,EACDuG,IAAA,WAAA,UAHCoG,EAAOxM,KAAK,YAAY6E,IAAI,KAI7B/E,EAAK4N,OAAM,OAIV5N,EAAAA,KAAME,yBAAwBoC,GAA9B,QAAA,SAAAiD,GACAA,EALDC,iBAQCD,EAAAA,IAAMC,WAAAA,WAENzF,EAAAA,KAAMuG,mBAAgBhE,SAIvBtC,EAAAE,KAAA,mBAAAZ,GAAA,QAAA,SAAAiG,GACHA,EAAAC,iBAEAzF,EAAAuG,IAAA,WAAA,WACAtG,EAAAE,KAAA,mBAAAoC,SAUI5C,EAAAA,GAAAA,QAAa+F,iBAAc,SAAdF,GANbA,EAAMC,iBADPC,EAUApG,EAAAmD,MACAxC,EAAAA,KAAS,iBAASyE,OACjBc,EAAMC,EAAAA,QAAN,kBAAAnC,KAAA,MAEArD,EAAME,EAAK+G,QAAA,gBAAX5D,KAAA,gBACArD,EAAAyF,EAAWpC,KAAA,oBAGZrD,EAAAA,GAAME,QAAK,kCAA+B,SAAAqF,GACzCA,EAAAA,iBAGAvF,EAAAE,KAAI4N,mBAAsBC,OAC1B/N,EAAAE,KAAI8N,wCAAa/J,WAgBjBjE,EAAAE,KAAIuF,mBAAcnG,GAAA,QAAA,uBAA+B,SAAjDiG,GACCA,EAAAC,iBAEA,IAAAC,EAAI3F,EAAAA,MACJgO,GAAIvK,IAASH,MAAAA,UACb4K,EAAW3O,EAAAmD,MAAGY,KAAQ,KAARC,KAAiByK,SApB5BG,EAAY,izBAmCf1O,GAAAA,EAAAA,QAAAA,sBAAiC2O,SAAQ9J,sBAAvB,CACjB,IAMIlE,EAEN6C,EAREqC,EAAAK,EAAA8H,SACAnK,EAAAgC,EAAA3B,KAAA,WAFuEF,EAIrEG,EAAQuK,IADV7I,EAAA3B,KAAoBuK,aAAAA,WAErBG,EAAA/K,EAAA,IAAA0K,EAED9N,IAAME,KAAKE,EACXJ,EAAWyB,eAAX5B,KACAkD,EAAAA,EAAAA,QAAmBxD,EAAAA,GAADa,EAAkBT,IAlDrC4D,GAAA1D,IAsDAO,EAAA+N,GAAAzM,IAKHnC,EAAAK,EAAAsO,QAAA9J,YAAA,cAAAf,KAAA,CArBM+K,iBAAkBN,IAsBrB9N,QAASiO,QAGR1O,EAAckG,EAAMwB,SAAQiH,QAAA9J,YAAsB8J,cAAlD7K,KAAA,CAEAzD,iBAAckO,EAtBZO,uBAAuB,EAyBzBhP,mBAAE2O,IAvBEtK,QAAQuK,GA4BZ7I,EAAAA,KAAM/C,8BAAkB3C,EAAA,MAAAQ,KAAA,gBAAAT,GAAAS,KAAA,uBAAAgE,OAAA3E,GACvBS,EAAAE,KAAA,mBADuBoC,OAEvBS,EAAAxD,EAAoBI,GAAA,KAazBK,EAAAV,GAAA,QAAA,gBAAA,SAAAiG,GACAA,EAAAC,iBA1BQJ,EAAQ/F,EAAEmD,MAAMyE,QAAQ,sBAAsBiH,QA6BlD3I,EAAMC,EAAAA,QAGLnG,EAAA,uBAAY4E,SAGZmB,EAAAhB,YAAU,sBAAoBtE,SAA9B,iCAEAH,EAAAA,SAAAA,iBAAqBsH,SAAQyG,MAAArL,SAAkBgB,OAA/CY,SA3BDmB,EAAM/C,SAAS,KAAKiE,IAAI,CA4BvB5G,QAAAA,QA1BA2L,mBAAoB,YA6BpBjG,EAAAlF,KAAA,KAAAkE,YAAA,qBAAAG,SAAA,gBAAA+B,IAAA,QAAA,QA1BDlB,EAAMlF,KAAK,qBAAqBoO,KAAK,qBA8BpCjP,EAAA,gCAAoBa,KAApB,uBAAmCwD,QAAA0B,KAUjCpF,EAAAV,GAAA,QAAIiP,kBAAJ,SAAAhJ,GAGA,GAFAA,EAAAC,iBAEAgJ,QAAC,+CAAY,CACZ,IAAApJ,EAAA/F,EAAAmD,MAAS0J,QAAT,sBACC9I,EAAAgC,EAAO3B,KAAGgL,WA1BV3O,EAAesF,EAAM3B,KAAK,aAAaiL,WA4BvCnL,EAAAH,EAASsH,IAAT5K,EAUA,GAnCJH,EAAeyF,EAAM6B,QAAQ,kBAAkB5D,KAAK,MA4B/C3D,EAAA0F,EAAA6B,QAAU,gBAAe/D,KAAQgC,gBAChCzF,EAAA2F,EAAA6B,QAAI,YAAA5D,KAAoBvD,yBAGvBM,EAAAmD,GAGH,eAAA5D,EAGH,IAFE,IAAAsL,EAfDzK,EAAAb,GAAAD,GAAAD,GAiBDyF,EAAA,EAAAA,EAAA+F,EAAA/H,OAAAgC,IA1BK+F,EAAK/F,GAAGZ,UAAYxE,GA4B1B6O,EAAAA,OAAAA,EAAAA,QAKA,IAAA,IAAAtJ,KAAA1E,EAAA,CAtDF,IA0DA8N,EAAAjO,EAAA6E,IAEH,WACA,IAAA,IAAA6G,KAAAuC,EAAA,CACA,IAEA/D,EAFAkE,EAAAH,EAAAvC,GAEA,IAAAxB,KAAAkE,EAEIrJ,IA/BM,IAAI0F,EAAO2D,EAAIlE,GA+BflF,EAAAA,EAAAA,EAANyF,EAAA/H,OAAAgC,IAEA,GAAIO,EAAQpG,GAAEiF,UAAdxE,EAGAE,OADAA,EAAME,OAAKgF,EAAA,IAVf,GAsBAyJ,IACAnE,IACGhJ,IACAxB,EAAKE,KAAL,oCACgCkD,EAC9Bf,sBAASvC,EAAA,MAAAmE,YAmBVjE,EAAAV,GAAIuP,QAAAA,gBAEJ,SAAAtJ,GA1CAA,EAAMC,iBAEFC,EAAQpG,EAAEmD,MAEdxC,EAAME,KAAK,mBAAmBoC,OAyC9B7C,EAAAA,KAAAA,wCAA6CwE,SAvC7C1E,EAAkBkG,EAAMwB,QAAQ,sBAyChCtH,EAAIyD,EAAY6D,QAAA,kBAAyB5D,KAAI,MAC5CN,EAAAxD,EAAAI,KAWCK,EACAyF,KAAAA,oBAAkBvF,KAAA,gBAClB4O,SAAAA,kDACA5O,KAAA,kBAAAkE,YAAA,UAAAG,SAAA,0BACD0C,QAhBD,gBAgBO1C,SAAA,sBAAA+B,IAAA,UAAA,QArCRtG,EAwCEE,KAAA,uBAAoB+K,KAAK/H,kDACxBhD,KAAA,kBAAc+K,YAAd,UAAA1G,SAAA,0BACAvE,EAAAV,GAAA,QAAIoC,gBAAoB5B,SAAxByF,GAEC7D,EAAAA,iBAGA,IAMD+D,EANCA,EAAApG,EAAAmD,MACA4C,EAAAK,EAAAwB,QAAA,sBACD7D,EAEDgC,EAAA3B,KAAA,WAxCG3D,EAAesF,EAAM3B,KAAK,aAAaiL,WAiDzC,GAJA/O,EAAMyF,EAAA6B,QAAA,kBAAA5D,KAAA,MACNoC,EAAKL,EAAChB,QAAY,gBAAAf,KAAA,gBAClB+B,EAAMlF,EAAK+G,QAAS,YAAS5D,KAAA,kBAE7B,eAAAD,GAAA,eAAAA,EAAA,CArCGoB,EAAiBhE,EAAiBb,GAAcD,GAA/B,SAAA,eAwCtBiP,EAAAA,GAA2BjP,GAA3BiP,SAAAA,gBAA2BnK,EAE3BhD,EAAAA,KAAQ,sBADRgJ,GAAAA,GACQ/G,KAAA,kBAAAe,GAKZsK,EAAA1J,EAAA6B,QAAA,gBACA4H,GACApJ,EAAArB,YAAA,UAAAG,SAAA,0BACAuK,EAAAvK,SAAA,sBAAA+B,IAAA,UAAA,UAvCMb,EAAMrB,YAAY,0BAA0BG,SAAS,UAyCxDvE,EAAKoE,YAAL,sBAA+BkC,IAAUf,UAAO,UAG/C,CAGA,IADA,IAAA0F,EAAInL,EAAeP,GAAqBG,GAAxCD,GACI8D,EAAM,EAAGH,EAAAA,EAAQF,OAASpD,IAAAA,CAxC5B,IAAI4B,EAAUuJ,EAAK/F,GA2CrB1F,GAAAA,EAAAA,UAAAM,EAAA,CAEC4B,EAAIoC,gBAAmBpC,EAAM8C,eAC7BqK,EAAIrL,EAAYM,eAChBsB,EAAA/B,KAAI0L,sBAAyBhK,EAA7BP,gBAAAf,KAAA,iBAAA/B,EAAA8C,gBAzCE,OA+CDqK,GACApJ,EAAArB,YAAI2K,UAAc5L,SAAW,0BAC5BiC,EAAAlF,KAAA,KAAIoG,IAAOyI,QAAP,QACHA,EAAAA,SAAAA,sBAAwBC,IAAX,UAAb,UAxCFvJ,EAAMrB,YAAY,0BAA0BG,SAAS,UA0CpDnE,EAAAA,KAAAA,KAAAA,IAAWmD,QAAQC,WACnB4B,EAAAhB,YAAA,sBAAAkC,IAAA,UAAA,MAKHkE,IACAhJ,IAzCAA,MAUDxB,EAAMV,GAAG,QAAS,YAAa,SAAUiG,GA6CvCA,EAAAC,iBA1CenG,EAAEmD,MAAlB,IA6CEY,EAAI6L,EAASxL,KAAA,WACZ1B,EAASE,EAAWgN,KAAS9M,aAC5BoB,EAAAH,EAAK8L,IAAAA,EAGJA,EAAAA,KAAAA,cAAiB7M,KAAS,WAC1B,IACDyB,EADCzE,EAAAmD,MALFtC,KAAA,oBAOAsD,EAAMM,EAAAL,KAAA,cACNyL,EAAAA,EAAiBrJ,MAElB,IAAAkJ,EA3CI3O,EAAWmD,GAAQ9B,eAAe+B,KA6CvCpD,EAAIqF,GAAMlE,GAASwN,GAGdI,MAAJJ,IACMG,iBAADH,IAAiC,GAAhCA,EAAgCK,QAAA,OACpCF,EAAAA,EAAgBF,QAAM,KAAK9O,MAE3BgP,EAAAA,GAAAA,GAAsBH,KAKxBJ,IACDnE,IA3CDhJ,IAgDCxB,IAAAA,EAAWT,EAAA,GAAAuJ,UACXoG,EAAAlP,EAAAE,KAAA,oCAAAkD,EAAA,sBAAAtD,EAAA,MACDoP,EAjFDrN,KAAA,WAoFAxC,EAAAmD,MAAAuG,YAAArE,KAIHwK,EAAAlP,EAAAE,KAAA,oCAAAkD,EAAA,sBAAAtD,EAAA,MA9CIN,EAAkBU,KAAK,8BAA8B2B,KAAK,WA+C3D,IAECoN,EAFDxJ,EAAS1C,EAAAA,MACR0C,EAAIrC,SAAW7D,0BACf0P,EAAInP,EAAYI,KAAGX,oBAAqBwF,OAGxChD,GAAAC,MAAK5B,WAAWqB,GAAAA,QAAe8B,KAAS,WACvC,GAAAnD,EAAAiC,SAAA,2BAAAa,OANyEgM,EAS1E7L,KAAA,uBAAA4L,GAAA5M,SAAA,KAAAC,OAAAC,MAAA,4CAAAC,KAAAC,WAAAC,IAAA,eA7CKwM,EAAiB7M,SAAS,2BAA2BgB,KAAK,MAAOb,KAAKC,WAAWC,OAInFwM,EAAiBrJ,WAAW,wBAAwBxD,SAAS,KAAKoC,OAAOiJ,MAAMrL,SAAS,2BAA2B4B,UAiDrHR,EAAIlC,SAAE,2BACL2J,EAAQzF,EAAAvF,KAAA,oBADH6E,OAGExE,OANF,GAAA2O,EAAAhP,KAAA,KAAAA,KAAA,4BAAAgD,OAQNc,EAAS9D,KAAA,KAAAA,KAAA,qBAAgBoC,OAAAC,MAAA,yCAAA4M,EAAA,WAEvBnP,EAAMqC,KAAS,KAAAnC,KAAA,4BAAf0G,KAAAuI,GAGD9P,EAAEa,KAAA,KAAAA,KAAD,yBAADuE,OAAAiJ,MAAAA,MAAAxN,KAAA,4BAAA+D,YAQAzE,MA9CDQ,EAAME,KAAK,mBAAmBoC,OAgD7BtC,EAAAE,KAAIoD,wCAAoCW,YA2czCgF,EAAOE,SAASM,CAChBP,YAAQ,sBACRC,YAAQ,0BACRzH,sBAAA,EACAA,UAAAA,UACA+F,MAAA,SAAAlC,EAAA8J,GA3EKjK,EAAQ/F,EAAEgQ,EAAGC,MA8ElBrQ,EAAS6K,EAAAA,QAAT,kBAAAzG,KAAA,MACApE,EAAS8K,EAAAA,QAAc,gBAAvB1G,KAAA,gBACA5D,EAAA2F,EAAA6B,QAAA,YAAA5D,KAAA,mBA1EA0E,WAAY,SAAUxC,EAAO8J,GAU5B,IAkEHvK,IAAAA,EAAAA,EAAAA,EAAiBwK,MAGjBC,EAAAnK,EAAA6B,QAAA,uBACH7D,EAAAgC,EAAA3B,KAAA,WACA3D,EAAAsF,EAAA3B,KAAA,aAAAiL,WAIMlJ,EADoFhF,EAEtFb,GAAAD,GAAAD,GA5EWyF,EAAI,EAAGA,EAAI8C,EAAe9E,OAAQgC,IA6E7C8C,EAAI9C,GAAeZ,UAAAxE,GAClBkI,EAAcwH,OAAAtK,EAAA,GAvEbxF,EAAa0F,EAAM6B,QAAQ,gBAAgB5D,KAAK,gBA6ElD5D,EAAIgL,EAAapI,QAAS,YAAAgB,KAAA,kBACzBoH,EAAa/G,EAAQrB,SAAA,sBAAAoN,IAAA,SAAAvK,EAAAqG,GA1EnB,MAAO,CA6EVlM,MAFC+F,EAAA/F,EAAAkM,IAEM9H,KAAA,WACNI,SAAMuB,EADA3B,KAAA,aAAAiL,WAENhM,eAAKnC,KAAaiL,MAFZpG,EAAA3B,KAAA,mBAGNA,YAAM2B,EAAA3B,KAAA,kBAEL0H,MAGAzK,EAAAA,GAAyB0K,GAAU1K,GAAAA,EAEpCsD,IACChD,IA3EAQ,OA8EAiJ,mBA0CF3F,EAAYzF,EAAGJ,mBAASyQ,IAQxBrQ,EAAA,4DAAAC,GAAA,QAAA,SAAA+B,GAGDA,EAAAmE,iBAEH,GAAAxF,EAAAqC,SAAA,qBAAAa,QACAlD,EAAA0D,QAAA,2IAEG,IAAA+G,EAASD,EAAAA,cAAiBqB,WAAA3L,KAAA,0BA5EgC,GAArDuK,EAAapI,SAAS,qBAAqBa,QAgF/CuH,EAAIA,QAAapI,2IA5EjBhD,EAAEuE,KAAK,CAgFPC,KAAA,OACCxE,IAAAA,aAACmM,QACA/H,KAAA,CACAyH,OAAA,cACAC,MAAA5K,aAAA4K,MAHkB/K,WAAnBc,KAAAkK,UAAAhL,GAKAI,iBAAAU,KAAAkK,UAAA5K,GA9ECE,mBAAoBQ,KAAKkK,UAAU1K,IAiFpCmD,QAAI,SADE8L,GAENjN,QAAGzB,IAAEV,GAEJ2K,EAAAA,SAAQ,qBADHjH,SAELkH,EAAO5K,SAAAA,qBAFF0D,SAGLvD,GAHKkP,SAHAC,cAqBHxQ,EAAA,wBAAAC,GAAA,QAAA,WAhFJ,IAAI8F,EAAQ/F,EAAEmD,MAkFXiI,EAAAA,EAAAA,gDAA+C3B,IAA/C,SAAA,QACAM,EAAA/J,EAAA,gBAAAiH,IAAA,SAAA,KAIAlB,EAFD7D,SAEO,aACN+H,EAAAhD,IAAA,SAAIhF,QACHjC,EAAAA,IAAEuE,SAAK,KACNC,EAAAA,YAAI,YACJnB,EAAAA,SAAAA,KAAKnC,KAAAA,QAAaiL,wBAEjBN,EAAAA,IAAAA,SAAM,KACNC,EAAAA,IAAAA,SAAO5K,OAFF6E,EAAAb,SAHA,YAONP,EAAAA,SAAAA,KAAOX,KAAE,QAAA,2BAuJkBhE,EAAA,eAAhCyQ,OAAA,SAAAzO,GAGA,IAAA0O,EAAAxK,MAAAyK,OAAAC,MAAA,GArEIC,EAAS,IAAIC,WAuElBnQ,EAAKhB,OAAIoR,EACR7K,EAAAA,WAAMC,KA+BNhE,EAAAA,KAAAA,sBAEAlC,GAAA,QAAA,SAAAiG,GAvEAA,EAAMC,iBAwENiI,QAAMvN,uHACNuN,EAAWpO,EAAAmD,MAAAiB,KAAA,aACTpE,EAAA,mBACDqD,EAACnC,aAAiBkE,cAAnB4L,EArEChR,EAAEuE,KAAK,CAwET+I,SAAC,OACA9I,KAAIxE,OACHA,IAACqD,EACDsB,QAAIsM,SAAW7M,GAEdmJ,EADOkD,SA1DiE,YAAvEtP,EAAiB,gBAAjB,KAAA,SAAA,cAECoC,GADAD,EAAU3C,EAAME,KAAK,qBACDA,KAAK,iBAAiBmC,SAAS,qCAAqCA,SAAS,sBACjGkO,EAAkBlR,EAAE,wBAExBuD,EAAUS,KAAK,eAAgB,iBAC/BkN,EAAgBrQ,KAAK,QAAQoO,KAAK,qBAClC3L,EAAQ4B,SAAS,6BACjBpE,EAAuB+M,SAAS,CAC/BC,KAAM,OAIRnN,EAAMV,GAAG,QAAS,uBAAwB,SAAUiG,GACnDA,EAAMC,iBACN,IAAIC,EAAQpG,EAAEmD,MACViL,EAAQpO,EAAE,kBACVsD,EAAU3C,EAAME,KAAK,oBACrB0C,EAAYD,EAAQzC,KAAK,iBAAiBmC,SAAS,qCAAqCA,SAAS,sBACjG4K,EAAsBzM,EAAiB,gBAAgBgQ,KAAKC,SAG7C,cAFDxD,EAAoBF,aAGrCE,EAAoBvL,QAAU,gBAC9BkB,EAAUS,KAAK,eAAgB,iBAC/B4J,EAAoBF,YAAc,WAClCtH,EAAMvF,KAAK,QAAQoO,KAAK,qBACxB3L,EAAQ4B,SAAS,6BACjBpE,EAAuB+M,SAAS,CAC/BC,KAAM,QAGPF,EAAoBvL,QAAU,cAC9BkB,EAAUS,KAAK,eAAgB,eAC/B4J,EAAoBF,YAAc,aAClCtH,EAAMvF,KAAK,QAAQoO,KAAK,mBACxB3L,EAAQyB,YAAY,6BACpBjE,EAAuB+M,SAAS,CAC/BC,KAAM,KAEP9N,EAAE,SAAS+E,YAAY,+BAGxBuK,IACAnE,IACAhJ,IAGAiM,EAAMvN,KAAK,MAAMkE,YAAY,YAC7BqJ,EAAMvN,KAAK,kBAAkBqE,SAAS,YACtClF,EAAE,kBAAkBiD,OACpBjD,EAAE,iBAAiBoF,SAIfpF,EAAE,kBAAkB6D,SACvB7D,EAAE,kBAAkBqR,aACNrR,EAAE,wBACRyQ,OAAO,WACd,IAAIa,EAAWtR,EAAEmD,MAAMH,SAAS,mBAAmB0C,MACnD6K,SAASZ,QAAQjQ,OAAO6Q,SAASgB,KAAO,SAAWD,UA16CzD5R,CAg7CG8R","file":"whb-editor.js","sourcesContent":["\"use strict\";\r\n\r\n// window.onbeforeunload = function () {\r\n// \treturn \"There are unsaved changes. Leave now?\";\r\n// };\r\n\r\nwindow.onload = function () {\r\n\tdocument.body.style.display = \"block\";\r\n};\r\n\r\n(function ($) {\r\n\t$(document).ready(function () {\r\n\t\t$(window).on('load', function () {\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Global Variables\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// DOM variables\r\n\t\t\tvar $body = $('body');\r\n\t\t\tvar $wrap = $('#wn-header-builder');\r\n\t\t\tvar $sortablePlaces = $wrap.find('.whb-elements-place');\r\n\t\t\tvar $desktopSortablePlaces = $wrap.find('.whb-desktop-panel').find('.whb-columns[data-columns=\"row1\"]').find('.whb-elements-place');\r\n\t\t\tvar $currentElement;\r\n\t\t\tvar $currentModalEdit;\r\n\r\n\t\t\t// Data variables\r\n\t\t\tvar components = whb_localize.components && !Array.isArray(whb_localize.components) ? whb_localize.components : {};\r\n\t\t\tvar editorComponents = whb_localize.editor_components ? whb_localize.editor_components : {};\r\n\t\t\tvar frontendComponents = whb_localize.frontend_components ? whb_localize.frontend_components : {};\r\n\t\t\tconst platforms = {\r\n\t\t\t\t\"desktop-view\": {},\r\n\t\t\t\t\"tablets-view\": {},\r\n\t\t\t\t\"mobiles-view\": {},\r\n\t\t\t};\r\n\r\n\t\t\t// Position variables\r\n\t\t\tvar currentCell;\r\n\t\t\tvar currentRow;\r\n\t\t\tvar currentPanel;\r\n\r\n\t\t\t// Import button flag\r\n\t\t\tvar importButtonFlag = false;\r\n\r\n\t\t\t// Clipboard element\r\n\t\t\tvar $clipboardElem;\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Helper Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbDebug() {\r\n\t\t\t\tconsole.log('%c Components:', 'font-size: 18px; background: #EC9787; color: #fff;', components);\r\n\t\t\t\tconsole.log('%c Editor Components:', 'font-size: 18px; background: #6F9FD8; color: #fff;', editorComponents);\r\n\t\t\t\tconsole.log('%c Frontend Components:', 'font-size: 18px; background: #ECDB54; color: #fff;', frontendComponents);\r\n\t\t\t}\r\n\t\t\twhbDebug();\r\n\r\n\t\t\t// check string is json\r\n\t\t\tfunction whbIsJson(str) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tJSON.parse(str);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsObject(obj) {\r\n\t\t\t\treturn obj === Object(obj);\r\n\t\t\t}\r\n\r\n\t\t\t// Check for emptiness object\r\n\t\t\tfunction whbIsEmptyObj(obj) {\r\n\t\t\t\tfor (var key in obj) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsFrontendBuilder() {\r\n\t\t\t\tif ($body.hasClass('whb-frontend-builder-wrap')) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Editor Preview\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfor (var key in components) {\r\n\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\tconst element = components[key];\r\n\t\t\t\t\tif (key.search('logo') != -1) {\r\n\t\t\t\t\t\tvar elemUniqueID = key.slice('5');\r\n\t\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"logo\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\tvar $logo = $(this);\r\n\t\t\t\t\t\t\twp.media.attachment(element.logo).fetch().done(function () {\r\n\t\t\t\t\t\t\t\t$logo.children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\">');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Frontend Builder Iframe Height\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tvar docHeight = $(document).height();\r\n\t\t\t$('#whbIframe').css('height', docHeight);\r\n\t\t\t$('#whbIframe').contents().find('a').on('click', function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Nice Scroll\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// $('.whb-frontend-builder').niceScroll({\r\n\t\t\t// \tcursorborder: \"0\",\r\n\t\t\t// \tbackground: \"#e7e7e7\",\r\n\t\t\t// \tcursorcolor: \"#91989e\",\r\n\t\t\t// });\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Tab\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-tab-panel' + $wrap.find('.whb-tabs-list').find('li.w-active').find('a').attr('href')).show();\r\n\t\t\t$wrap.on('click', '.whb-tabs-list a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $currentTab = $this.parent();\r\n\t\t\t\tvar $tabs = $this.closest('ul').find('li');\r\n\t\t\t\tvar $tabUl = $this.closest('ul');\r\n\r\n\t\t\t\tif (!$currentTab.hasClass('w-active')) {\r\n\t\t\t\t\t// active current navigation\r\n\t\t\t\t\t$tabs.removeClass('w-active');\r\n\t\t\t\t\t$currentTab.addClass('w-active');\r\n\r\n\t\t\t\t\t// show panel\r\n\t\t\t\t\tif ($tabUl.hasClass('whb-element-groups')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-group-panel').hide().end().find('.whb-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-groups')) {\r\n\t\t\t\t\t\t$tabUl.siblings('.whb-styling-group-panel').hide().end().siblings('.whb-styling-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-screens')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-styling-screen-panel').hide().end().find('.whb-styling-screen-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$wrap.find('.whb-tab-panel:not(.whb-group-panel)').hide().end().find('.whb-tab-panel' + $this.attr('href')).fadeIn(300);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Toggle device\r\n\t\t\t$('#whb-desktop-tab, #whb-sticky-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-desktop-view, .whb-sticky-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-tablets-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-mobiles-device');\r\n\t\t\t\t$body.addClass('whb-tablets-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-tablets-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-mobiles-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device');\r\n\t\t\t\t$body.addClass('whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-mobiles-view').show();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Full Modal\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show full modal\r\n\t\t\t$wrap.find('.whb-full-modal-btn').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar modalTarget = $this.data('modal-target');\r\n\t\t\t\tvar $modal = $wrap.find('.whb-full-modal[data-modal=\"' + modalTarget + '\"]');\r\n\r\n\t\t\t\t$body.css('overflow', 'hidden');\r\n\t\t\t\t$modal.find('textarea').val(' ');\r\n\t\t\t\t$modal.fadeIn(200);\r\n\t\t\t});\r\n\t\t\t// Hide full modal\r\n\t\t\t$wrap.find('.whb-full-modal-close').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t$wrap.find('.whb-full-modal').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Add Element Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show add element modal\r\n\t\t\t$wrap.on('click', '.w-add-element', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-elements').show();\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $this.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $this.attr('data-align-col'); // left, center, right\r\n\t\t\t});\r\n\t\t\t// Hide add element modal\r\n\t\t\t$wrap.on('click', '.whb-modal-header i, .whb_close', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t});\r\n\t\t\t// Append new element to editor\r\n\t\t\t$wrap.find('.whb-modal-wrap').on('click', '.whb-elements-item a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar uniqueID = new Date().valueOf();\r\n\t\t\t\tvar editorIcon = $(this).find('i').attr('class');\r\n\t\t\t\tvar controlsHtml = `<span class=\"whb-controls\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Copy to Clipboard\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-copy-btn ti-files\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Settings\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-edit-btn sl-pencil\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Hide\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-hide-btn ti-eye\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Remove\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-delete-btn ti-close\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>`;\r\n\r\n\t\t\t\tif ($this.closest('.whb-elements-item').hasClass('whb-clipboard-item')) {\r\n\t\t\t\t\tvar $elem = $this.parent();\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\tvar newElem = elemName + '_' + uniqueID;\r\n\r\n\t\t\t\t\tfor (const key in components) {\r\n\t\t\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tconst element = $.extend(true, {}, components[key]);\r\n\t\t\t\t\t\t\tif (elemID == key) {\r\n\t\t\t\t\t\t\t\tcomponents[newElem] = element;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$currentElement = $clipboardElem.clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$currentElement = $this.parent().clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID,\r\n\t\t\t\t\t\t'data-hidden_element': false,\r\n\t\t\t\t\t\t'data-editor_icon': editorIcon\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$wrap.find('.whb-columns[data-columns=\"' + currentRow + '\"]').find('.whb-col.col-' + currentCell).find('.whb-elements-place').append($currentElement);\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel, true);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Copy Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-copy-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $elem = $(this).closest('.whb-elements-item').clone();\r\n\r\n\t\t\t\t$clipboardElem = $elem.clone();\r\n\r\n\t\t\t\t// Remove all clipboard item\r\n\t\t\t\t$('.whb-clipboard-item').remove();\r\n\r\n\t\t\t\t// Create new clipboard item\r\n\t\t\t\t$elem.removeClass('ui-sortable-handle').addClass('w-col-sm-4 whb-clipboard-item');\r\n\t\t\t\t$elem.children('.whb-controls').remove().end().children('img').remove();\r\n\t\t\t\t$elem.children('a').css({\r\n\t\t\t\t\t'display': 'block',\r\n\t\t\t\t\t'background-color': '#e3e3e3'\r\n\t\t\t\t});\r\n\t\t\t\t$elem.find('i').removeClass('ti-control-record').addClass('ti-clipboard').css('color', '#f60');\r\n\t\t\t\t$elem.find('.whb-element-name').text('Paste (Clipboard)');\r\n\r\n\t\t\t\t// Append clipboard item to elements box\r\n\t\t\t\t$('.whb-modal-wrap.whb-elements').find('.whb-modal-contents').prepend($elem);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Delete Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-delete-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (confirm('Press OK to delete element, Cancel to leave')) {\r\n\t\t\t\t\tvar $elem = $(this).closest('.whb-elements-item');\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\t\t// delete from components\r\n\t\t\t\t\tdelete components[elemID];\r\n\r\n\t\t\t\t\t// delete from editor components\r\n\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\tvar cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\tvar findInCell = false;\r\n\t\t\t\t\t\t\tvar panel = editorComponents[platform_key];\r\n\r\n\t\t\t\t\t\t\t(function () {\r\n\t\t\t\t\t\t\t\tfor (var rowKey in panel) {\r\n\t\t\t\t\t\t\t\t\tvar row = panel[rowKey];\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var cell_key in row) {\r\n\t\t\t\t\t\t\t\t\t\tvar cell = row[cell_key];\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn; // return to anonymous function\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Edit Button\r\n\t\t\t *\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-edit-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t$currentElement = $this.closest('.whb-elements-item');\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id');\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Hidden Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// row\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-tabs-panels').find('.whb-columns')\r\n\t\t\t\t.children('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash')\r\n\t\t\t\t.closest('.whb-columns').addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\r\n\t\t\t// elements\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-elements-place').find('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\r\n\t\t\t$wrap.on('click', '.whb-hide-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// Get variables\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $elem = $this.closest('.whb-elements-item');\r\n\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\tvar hidden_element;\r\n\t\t\t\tvar mustBeHidden;\r\n\r\n\t\t\t\t// Position of the Current Element\r\n\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\tif (elemName == 'header-area' || elemName == 'sticky-area') {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tvar hidden_element = editorComponents[currentPanel][currentRow]['settings']['hidden_element'];\r\n\t\t\t\t\teditorComponents[currentPanel][currentRow]['settings']['hidden_element'] = !hidden_element;\r\n\t\t\t\t\tmustBeHidden = !hidden_element;\r\n\t\t\t\t\t$elem.attr('data-hidden_element', !hidden_element).data('hidden_element', !hidden_element);\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tvar $row = $elem.closest('.whb-columns');\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$row.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$row.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tconst cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\tvar element = cell[i];\r\n\t\t\t\t\t\tif (element.uniqueId == elemUniqueID) {\r\n\r\n\t\t\t\t\t\t\telement.hidden_element = !element.hidden_element;\r\n\t\t\t\t\t\t\tmustBeHidden = element.hidden_element;\r\n\t\t\t\t\t\t\t$elem.attr('data-hidden_element', element.hidden_element).data('hidden_element', element.hidden_element);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#888');\r\n\t\t\t\t\t\t$elem.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#0073aa');\r\n\t\t\t\t\t\t$elem.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb_save', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $save_btn = $(this);\r\n\t\t\t\tvar elemName = $currentElement.data('element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.data('unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t// Set field value\r\n\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\tvar fieldValue = $fieldInput.val();\r\n\r\n\t\t\t\t\tif (fieldValue == '') {\r\n\t\t\t\t\t\tif (components[elemID].hasOwnProperty(fieldName)) {\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fieldValue != undefined) {\r\n\t\t\t\t\t\t\tif (typeof fieldValue == 'string' && fieldValue.indexOf('\"') != -1) {\r\n\t\t\t\t\t\t\t\tfieldValue = fieldValue.replace(/\"/g, \"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// Copy element in all platforms\r\n\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\tvar $currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentElements.each(function () {\r\n\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Create preview for text and image field in editor\r\n\t\t\t\t$currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentModalEdit.find('.whb-field.whb-placeholder').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-img-placeholder')) {\r\n\t\t\t\t\t\tvar imageID = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (imageID) {\r\n\t\t\t\t\t\t\twp.media.attachment(imageID).fetch().done(function () {\r\n\t\t\t\t\t\t\t\tif (!$currentElements.children('.whb-img-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentElements.attr('data-img-placeholder', imageID).children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\" />');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$currentElements.children('.whb-img-placeholder-el').attr('src', this.attributes.url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.removeAttr('data-img-placeholder').children('a').show().end().children('.whb-img-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-text-placeholder')) {\r\n\t\t\t\t\t\tvar textValue = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (textValue.trim()) {\r\n\t\t\t\t\t\t\tif (!$currentElements.find('a').find('.whb-text-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-element-name').hide().after('<span class=\"whb-text-placeholder-el\">' + textValue + '</span>');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-text-placeholder-el').html(textValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.find('a').find('span.whb-element-name').show().end().end().find('.whb-text-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Hide modal\r\n\t\t\t\tif (!whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Element Settings Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbElementSettings($currentElement, currentPanel, new_el = false) {\r\n\t\t\t\tvar elemName = $currentElement.attr('data-element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.attr('data-unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\tif (!components.hasOwnProperty(elemID)) {\r\n\t\t\t\t\tcomponents[elemID] = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Preloader\r\n\t\t\t\tif (!$wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_get_component_fields',\r\n\t\t\t\t\t\tel_name: elemName,\r\n\t\t\t\t\t\tnonce: whb_localize.nonce\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('.wn-header-builder-wrap').append(data);\r\n\r\n\t\t\t\t\t\t$currentModalEdit = $wrap.find('.whb-modal-wrap[data-element-target=\"' + elemName + '\"]');\r\n\r\n\t\t\t\t\t\t// Init tab\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li').removeClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tab-panel').hide();\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li:first').addClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel:first').show();\r\n\t\t\t\t\t\t// Styling tab\r\n\t\t\t\t\t\tvar $tabPanels = $currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel');\r\n\t\t\t\t\t\tif (currentPanel == 'desktop-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'tablets-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#tablets\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'mobiles-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#mobiles\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Show first panel\r\n\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel').find('.whb-tab-panel:first').show();\r\n\r\n\t\t\t\t\t\t// Show current modal edit\r\n\t\t\t\t\t\t$currentModalEdit.show();\r\n\r\n\t\t\t\t\t\t// Set fields values\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\t\t\tvar fieldStd = $fieldInput.data('field-std');\r\n\r\n\t\t\t\t\t\t\tfieldStd = (typeof fieldStd != 'undefined') ? fieldStd : '';\r\n\r\n\t\t\t\t\t\t\t// if statement: update field value\r\n\t\t\t\t\t\t\t// else statement: set default data to field\r\n\t\t\t\t\t\t\tif ($fieldInput.hasClass('whb-field-textarea')) {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]).val( components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else if (typeof components[elemID][fieldName] != 'undefined') {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(fieldStd).val(fieldStd);\r\n\t\t\t\t\t\t\t\tif (fieldStd) {\r\n\t\t\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldStd;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar elemEditorIcon = $currentElement.find('a').find('i').attr('class');\r\n\t\t\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\t\t\teditorComponents[platform_key][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Fields\r\n\t\t\t\t\t\twhbFields();\r\n\r\n\t\t\t\t\t\t// Dependency\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').on('change', function () {\r\n\t\t\t\t\t\t\twhbFieldDependency($(this));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').trigger('change');\r\n\r\n\t\t\t\t\t\t// Craete|Update element in all platforms (desktop, tablets, mobiles)\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\t\t\t\t$('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhbModalDraggable($currentModalEdit[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbDebug();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Field Dependency Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFieldDependency($parent) {\r\n\t\t\t\tvar dependencyData = $parent.data('dependency');\r\n\t\t\t\tvar parentValue = $parent.find('.whb-field-input').val();\r\n\r\n\t\t\t\t$.each(dependencyData, function (val, els) {\r\n\t\t\t\t\tfor (var i = 0; i < els.length; i++) {\r\n\r\n\t\t\t\t\t\tvar $elem = $currentModalEdit.find('.whb-field-input[data-field-name=\"' + els[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\tvar haveDependency = $elem.attr('class') == 'whb-field w-col-sm-12 whb-dependency' ? true : false;\r\n\r\n\t\t\t\t\t\tif (val == parentValue) {\r\n\t\t\t\t\t\t\t$elem.show();\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\twhbFieldDependency($el);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\t$.each($elem.data('dependency'), function (elem_value, elems) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-field-input[data-field-name=\"' + elems[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end for\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Fields Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFields() {\r\n\t\t\t\tvar $modalWrap = $('.whb-modal-wrap');\r\n\r\n\t\t\t\t// Switcher field\r\n\t\t\t\t$modalWrap.find('.whb-switcher').find('.whb-field-input').on('change', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.is(':checked')) {\r\n\t\t\t\t\t\t$this.attr('value', 'true');\r\n\t\t\t\t\t\t$this.attr('checked', 'checked');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.attr('value', 'false');\r\n\t\t\t\t\t\t$this.removeAttr('checked');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Attach Image field\r\n\t\t\t\t$modalWrap.find('.whb-attach-image').each(function () {\r\n\t\t\t\t\tvar frame;\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $addImgLink = $this.find('.whb-add-image');\r\n\t\t\t\t\tvar $delImgLink = $this.find('.whb-remove-image');\r\n\t\t\t\t\tvar $imgContainer = $this.find('.whb-preview-image');\r\n\r\n\t\t\t\t\t// ADD IMAGE LINK\r\n\t\t\t\t\t$addImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\t\t\t\t\t\tvar value = $imgIdInput.val();\r\n\r\n\t\t\t\t\t\tvalue = value ? value : '';\r\n\r\n\t\t\t\t\t\t// If the media frame already exists, reopen it.\r\n\t\t\t\t\t\tif (frame) {\r\n\t\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Create a new media frame\r\n\t\t\t\t\t\tframe = wp.media({\r\n\t\t\t\t\t\t\tmultiple: false // Set to true to allow multiple files to be selected\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// When an image is selected in the media frame...\r\n\t\t\t\t\t\tframe.on('select', function () {\r\n\t\t\t\t\t\t\t// Get media attachment details from the frame state\r\n\t\t\t\t\t\t\tvar attachment = frame.state().get('selection').first().toJSON();\r\n\r\n\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t$imgContainer.html('').append('<img src=\"' + attachment.url + '\" alt=\"\">').css('display', 'block');\r\n\r\n\t\t\t\t\t\t\t// Send the attachment id to our hidden input\r\n\t\t\t\t\t\t\t$imgIdInput.val(attachment.id).trigger('input');\r\n\r\n\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Finally, open the modal on click\r\n\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Delete image link\r\n\t\t\t\t\t$delImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\r\n\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\r\n\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t$delImgLink.hide();\r\n\r\n\t\t\t\t\t\t// Delete the image id from the hidden input\r\n\t\t\t\t\t\t$imgIdInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Number Unit field\r\n\t\t\t\t$modalWrap.find('.whb-number-unit').each(function () {\r\n\t\t\t\t\tvar $numberUnit = $(this);\r\n\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $numberUnit.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$option.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $this.data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$inputNumber.on('change', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $numberUnit.find('.whb-opts').children('span.whb-active').data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Custom Select field\r\n\t\t\t\t$modalWrap.find('.whb-custom-select').find('.whb-opts').find('span').on('click', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $customSelect = $this.closest('.whb-custom-select');\r\n\t\t\t\t\tvar $option = $customSelect.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $customSelect.find('.whb-field-input');\r\n\t\t\t\t\tvar value = $this.data('value');\r\n\r\n\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t$fieldInput.val( value ).trigger('input');\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Icons field\r\n\t\t\t\t$modalWrap.find('.whb-field-icons-wrap').each(function () {\r\n\t\t\t\t\tvar $iconsWrap = $(this);\r\n\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\t\t\t\t\tvar $fieldInput = $iconsWrap.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$icon.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar $iconClass = $this.attr('for');\r\n\r\n\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t$fieldInput.attr('value', $iconClass).trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Color picker\r\n\t\t\t\t$modalWrap.find('.whb-color-picker').wpColorPicker();\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Header Builder - Set Value of Field\r\n\t\t\t\t * @version\t1.0.0\r\n\t\t\t\t */\r\n\t\t\t\t$modalWrap.find('.whb-field').find('.whb-field-input').each(function () {\r\n\t\t\t\t\tvar $fieldInput = $(this);\r\n\r\n\t\t\t\t\t// Switcher\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-switcher-field')) {\r\n\t\t\t\t\t\tif ($fieldInput.val() == 'true') {\r\n\t\t\t\t\t\t\t$fieldInput.attr('checked', 'checked').trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.removeAttr('checked');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Custom Select\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-custom-select')) {\r\n\t\t\t\t\t\t$fieldInput.siblings('.whb-opts').find('span').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\tif ($this.data('value') == $fieldInput.val()) {\r\n\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Number Unit\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-number-unit')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\tvar $numberUnit = $fieldInput.closest('.whb-number-unit');\r\n\t\t\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\t\t\tvar numberValue = parseFloat(value);\r\n\t\t\t\t\t\t\tvar valueUnit = value.split(numberValue)[1];\r\n\r\n\t\t\t\t\t\t\t$inputNumber.val(numberValue).trigger('input');\r\n\t\t\t\t\t\t\t$option.each(function () {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar unit = $this.data('value');\r\n\r\n\t\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\t\tif (unit == valueUnit) {\r\n\t\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.closest('.whb-number-unit').find('input[type=\"number\"]').val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Icon\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-icon-field')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\t\t\t\t\t\tvar $iconsWrap = $fieldInput.closest('.whb-field-icons-wrap');\r\n\t\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t\t$iconsWrap.find('.wn-icon').find('label[for=\"' + value + '\"]').addClass('whb-active');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Attach Image\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-attach-image')) {\r\n\t\t\t\t\t\tvar val = $fieldInput.val();\r\n\t\t\t\t\t\tvar $delImgLink = $fieldInput.siblings('.whb-remove-image');\r\n\t\t\t\t\t\tvar $imgContainer = $fieldInput.siblings('.whb-preview-image');\r\n\r\n\t\t\t\t\t\tif (val && !wp.media.attachment(val).destroyed) {\r\n\t\t\t\t\t\t\tif (!$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\twp.media.attachment(val).fetch().always(function () {\r\n\t\t\t\t\t\t\t\tif ($currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$imgContainer.html('')\r\n\t\t\t\t\t\t\t\tif (this.attributes.url != undefined) {\r\n\t\t\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t\t\t$imgContainer.append('<img src=\"' + this.attributes.url + '\" alt=\"\">').css('display', 'block');\r\n\t\t\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\t\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t\t$delImgLink.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Drag and Drop Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// Editor draggable\r\n\t\t\tfunction whbEditorDraggable() {\r\n\t\t\t\t$sortablePlaces.sortable({\r\n\t\t\t\t\tconnectWith: '.whb-elements-place',\r\n\t\t\t\t\tplaceholder: 'ui-sortable-placeholder',\r\n\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\ttolerance: 'pointer',\r\n\t\t\t\t\tstart: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\r\n\t\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeStop: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\t\t\t\t\t\tvar $els_place = $elem.closest('.whb-elements-place');\r\n\t\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\t\tvar elemFromCell;\r\n\r\n\t\t\t\t\t\t// Remove element from start cell\r\n\t\t\t\t\t\tvar start_cell_obj = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\t\tfor (var i = 0; i < start_cell_obj.length; i++) {\r\n\t\t\t\t\t\t\tif (start_cell_obj[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\telemFromCell = start_cell_obj.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Add element to received cell\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t\tvar new_cell_objs = $els_place.children('.whb-elements-item').map(function (i, el) {\r\n\t\t\t\t\t\t\t$elem = $(el);\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: $elem.data('element'),\r\n\t\t\t\t\t\t\t\tuniqueId: $elem.data('unique-id').toString(),\r\n\t\t\t\t\t\t\t\thidden_element: JSON.parse($elem.data('hidden_element')),\r\n\t\t\t\t\t\t\t\teditor_icon: $elem.data('editor_icon'),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).get();\r\n\r\n\t\t\t\t\t\t// Update editor components\r\n\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell] = new_cell_objs;\r\n\r\n\t\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\t\twhbDebug();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).disableSelection();\r\n\t\t\t}\r\n\t\t\twhbEditorDraggable();\r\n\r\n\t\t\t// Modal draggable\r\n\t\t\tfunction whbModalDraggable(element) {\r\n\t\t\t\tvar pos1 = 0,\r\n\t\t\t\t\tpos2 = 0,\r\n\t\t\t\t\tpos3 = 0,\r\n\t\t\t\t\tpos4 = 0;\r\n\r\n\t\t\t\tif (element.getElementsByClassName('whb-modal-header')) {\r\n\t\t\t\t\telement.getElementsByClassName('whb-modal-header')[0].onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whb_drag_mouse_down(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\tdocument.onmouseup = whbCloseModalDraggable;\r\n\t\t\t\t\tdocument.onmousemove = whbElementDrag;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbElementDrag(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos1 = pos3 - e.clientX;\r\n\t\t\t\t\tpos2 = pos4 - e.clientY;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\telement.style.top = (element.offsetTop - pos2) + \"px\";\r\n\t\t\t\t\telement.style.left = (element.offsetLeft - pos1) + \"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbCloseModalDraggable() {\r\n\t\t\t\t\tdocument.onmouseup = null;\r\n\t\t\t\t\tdocument.onmousemove = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhbModalDraggable($('.whb-modal-wrap')[0]);\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Publish Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t// Editor Preloader\r\n\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\t\t\t\t// var $WHBFrontend = $('#webnus-header-builder');\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_publish',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tcomponents: JSON.stringify(components),\r\n\t\t\t\t\t\teditorComponents: JSON.stringify(editorComponents),\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// Remove prelaoder\r\n\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t$WHBFrontend.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Collapse Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.whb-action-collapse').on('click', function () {\r\n\t\t\t\tvar $elem = $(this);\r\n\t\t\t\tvar $editor = $('.wn-header-builder-wrap.whb-frontend-builder').css('bottom', '-60%');\r\n\t\t\t\tvar $actions = $('.whb-actions').css('bottom', '0');\r\n\r\n\t\t\t\t// if: close\r\n\t\t\t\t// else: open\r\n\t\t\t\tif ($elem.hasClass('whb-open')) {\r\n\t\t\t\t\t$editor.css('bottom', '-60%');\r\n\t\t\t\t\t$actions.css('bottom', '0');\r\n\t\t\t\t\t$elem.removeClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-up');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$editor.css('bottom', '0');\r\n\t\t\t\t\t$actions.css('bottom', '60%');\r\n\t\t\t\t\t$elem.addClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-down');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Get Script\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbInjectScriptToIframe(src) {\r\n\t\t\t\tvar iframeHead = window.frames[\"whbIframe\"].document.getElementsByTagName(\"head\")[0];\r\n\t\t\t\tvar myScript = document.createElement('script');\r\n\t\t\t\tmyScript.src = src;\r\n\t\t\t\tiframeHead.appendChild(myScript);\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbInjectStyleToIframe(styles) {\r\n\t\t\t\tvar iframeTagStyle = window.frames[\"whbIframe\"].document;\r\n\t\t\t\tiframeTagStyle.getElementById('whb-enqueue-dynamic-style').children[0].innerHTML = styles;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save All Data Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbSaveAllData() {\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t'background-color': '#4cbf67',\r\n\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #4cbf67',\r\n\t\t\t\t\t\t'border-color': '#4cbf67'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_save_data',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t\t\t'background-color': '#008aff',\r\n\t\t\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #008aff',\r\n\t\t\t\t\t\t\t\t'border-color': '#008aff'\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar $newWHBFrontend = $(data);\r\n\r\n\t\t\t\t\t\t\t// Frontend Preloader\r\n\t\t\t\t\t\t\tif ($newWHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t\t\t\t$newWHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$WHBFrontend[0].outerHTML = $newWHBFrontend[0].outerHTML;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').trigger('click');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\taction: 'whb_live_dynamic_styles',\r\n\t\t\t\t\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\t\t\t\twhbInjectStyleToIframe(data);\r\n\t\t\t\t\t\t\t\t\t\t$('#whbIframe').contents().find('#webnus-header-builder').children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\tvar path = whb_localize.assets_url + 'src/frontend/';\r\n\t\t\t\t\t\t\tvar scripts = [\r\n\t\t\t\t\t\t\t\t'whb-jquery-plugins.js',\r\n\t\t\t\t\t\t\t\t'whb-frontend.js',\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[0]);\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Create Frontend Components Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbCreateFrontendComponents() {\r\n\t\t\t\tfrontendComponents = $.extend(true, {}, editorComponents);\r\n\t\t\t\tfor (var screen_key in frontendComponents) {\r\n\t\t\t\t\tfor (var rowKey in frontendComponents[screen_key]) {\r\n\t\t\t\t\t\tfor (var cell_key in frontendComponents[screen_key][rowKey]) {\r\n\t\t\t\t\t\t\tvar cell = frontendComponents[screen_key][rowKey][cell_key];\r\n\r\n\t\t\t\t\t\t\tif (cell_key == 'settings') {\r\n\t\t\t\t\t\t\t\tvar elemName = cell.element;\r\n\t\t\t\t\t\t\t\tvar elemID = cell.uniqueId;\r\n\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\tObject.assign(cell, components[component_key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (const key in cell) {\r\n\t\t\t\t\t\t\t\t\tif (cell.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\tconst value = cell[key];\r\n\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\tcell[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (cell.length != 0) {\r\n\t\t\t\t\t\t\t\t\tfor (var el of cell) {\r\n\t\t\t\t\t\t\t\t\t\tvar elemName = el.name;\r\n\t\t\t\t\t\t\t\t\t\tvar elemID = el.uniqueId;\r\n\t\t\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\t\t\tObject.assign(el, components[component_key]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tfor (const key in el) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (el.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = el[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tel[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Import Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// import button\r\n\t\t\t$(\"#whb-import\").change(function (e) {\r\n\t\t\t\tvar file = event.target.files[0];\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\treader.onload = onReaderLoad;\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t});\r\n\r\n\t\t\tfunction onReaderLoad(event) {\r\n\t\t\t\twhbImport(event.target.result);\r\n\t\t\t}\r\n\t\t\t// Import function\r\n\t\t\tfunction whbImport(content) {\r\n\t\t\t\tif (content && (whbIsJson(content) || whbIsObject(content))) {\r\n\t\t\t\t\t$body.css({\r\n\t\t\t\t\t\t'height': '1px',\r\n\t\t\t\t\t\t'overflow': 'hidden'\r\n\t\t\t\t\t}).prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t$('#wpwrap').css('display', 'none');\r\n\t\t\t\t\tcontent = whbIsJson(content) ? JSON.parse(content) : content;\r\n\t\t\t\t\tcomponents = content.whb_data_components;\r\n\t\t\t\t\teditorComponents = content.whb_data_editor_components;\r\n\t\t\t\t\tfrontendComponents = content.whb_data_frontend_components;\r\n\t\t\t\t\timportButtonFlag = true;\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('Header import input is empty! That\\'s why no data can import.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Prebuild Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-prebuild-item').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (confirm('Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?')) {\r\n\t\t\t\t\tvar fileName = $(this).data('file-name');\r\n\t\t\t\t\tvar $modal = $('.whb-full-modal');\r\n\t\t\t\t\tvar url = whb_localize.prebuilds_url + fileName;\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\tvar content = data;\r\n\t\t\t\t\t\t\twhbImport(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Header Type Switcher Button (Vertical|Horizontal)\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tif (editorComponents['desktop-view']['row1']['settings']['header_type'] == 'vertical') {\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar $headerSwitcher = $('#whb-vertical-header');\r\n\r\n\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t$headerSwitcher.find('span').text('Horizontal Header');\r\n\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\taxis: 'y'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$wrap.on('click', '#whb-vertical-header', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $tabs = $('.whb-tabs-list');\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar desktopRow1Settings = editorComponents['desktop-view'].row1.settings;\r\n\t\t\t\tvar header_type = desktopRow1Settings.header_type;\r\n\r\n\t\t\t\tif (header_type == 'horizontal') {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'vertical-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'vertical';\r\n\t\t\t\t\t$this.find('span').text('Horizontal Header');\r\n\t\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: 'y'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'header-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'header-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'horizontal';\r\n\t\t\t\t\t$this.find('span').text('Vertical Header');\r\n\t\t\t\t\t$panels.removeClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#wrap').removeClass('whb-header-vertical-toggle');\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// show desktop panel\r\n\t\t\t\t$tabs.find('li').removeClass('w-active');\r\n\t\t\t\t$tabs.find('li:first-child').addClass('w-active');\r\n\t\t\t\t$('.whb-tab-panel').hide();\r\n\t\t\t\t$('#desktop-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t(function () {\r\n\t\t\t\tif ($('.whb-languages').length) {\r\n\t\t\t\t\t$('.whb-languages').niceSelect();\r\n\t\t\t\t\tvar $select = $('select.whb-languages');\r\n\t\t\t\t\t$select.change(function () {\r\n\t\t\t\t\t\tvar language = $(this).children(\"option:selected\").val();\r\n\t\t\t\t\t\tlocation.replace(window.location.href + '&lang=' + language);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\r\n\t}); // end document ready\r\n})(jQuery);"]}