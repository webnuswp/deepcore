!function(){"use strict";jQuery("document").ready(function(m){var a=m("#commentform");a.attr("aria-live","polite"),a.prepend('<div id="comment-status" aria-live="assertive" role="status" tabindex="-1"></div>');var n,o=m("#comment-status");m("a.comment-reply-link").click(function(){n=m(this).parents(".comment").attr("id")}),a.submit(function(){var e=a.serialize();m("#commentform .deep-free-comment-error").remove(),m("#commentform .deep-free-field-error").remove();var t=!1;if(m("#commentform [aria-required=true]").each(function(){var e,r=m(this).attr("id")+"-error";""==m.trim(m(this).val())&&(e=m(this).prev("label").html(),m(this).attr("aria-describedby",r),m(this).parent().append(' <span class="deep-free-field-error" id="'+r+'">'+e+": "+deepFreeComments.required+"</span>"),t=!0),"email"==m(this).attr("name")&&""!=m.trim(m(this).val())&&(e=m(this).val(),/^([\w-\+.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.test(e)||(m(this).attr("aria-describedby",r),m(this).parent().append(' <span class="deep-free-field-error"id="'+r+'">'+deepFreeComments.emailInvalid+"</span>"),t=!0))}),t)return o.html('<p class="deep-free-comment-error">'+deepFreeComments.error+"</p>").focus(),!1;o.html('<p class="deep-free-comment-processing">'+deepFreeComments.processing+"</p>");var r=a.attr("action");return m.ajax({type:"post",url:r,data:e,dataType:"json",error:function(e,r,t){o.html('<p class="deep-free-comment-error">'+deepFreeComments.flood+"</p>").focus()},success:function(e,r){var t=e.success,s=e.response,e=e.status;t?(o.html('<p class="deep-free-comment-success" >'+e+"</p>").focus(),0<m("#comments").has("ol.commentlist").length?null!=n?m("#"+n).prepend(s):m(".commentlist").append(s):(m("#comments").append('<ol class="commentlist"></ol>'),m("ol.commentlist").html(s))):o.html('<p class="deep-free-comment-error" >'+deepFreeComments.required+"</p>").focus(),a.find("textarea[name=comment]").val("")}}),!1})})}();